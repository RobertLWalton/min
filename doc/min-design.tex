% Minimal Descriptive Programming Language Design
%
% File:         min-design.tex
% Author:       Bob Walton (walton@deas.harvard.edu)
% Date:		See \date below.
  
\documentclass[12pt]{article}

\usepackage{makeidx}
\usepackage{pictex}

\makeindex

\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.5in}
\raggedbottom

\setlength{\unitlength}{1in}

\pagestyle{headings}
\setlength{\parindent}{0.0in}
\setlength{\parskip}{1ex}

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}
\newcommand{\subsubsubsection}[1]{\paragraph[#1]{#1.}}
\newcommand{\subsubsubsubsection}[1]{\subparagraph[#1]{#1.}}

% Begin \tableofcontents surgery.

\newcount\AtCatcode
\AtCatcode=\catcode`@
\catcode `@=11	% @ is now a letter

\renewcommand{\contentsname}{}
\renewcommand\l@section{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\l@table{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\tableofcontents{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{1.0in}%
	      \setlength{\rightmargin}{1.0in}}%
    \item\@starttoc{toc}%
    \end{list}}
\renewcommand\listoftables{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{1.0in}%
	      \setlength{\rightmargin}{1.0in}%
	      }%
    \item\@starttoc{lot}%
    \end{list}}

\catcode `@=\AtCatcode	% @ is now restored

% End \tableofcontents surgery.

\newcommand{\CN}[2]%	Change Notice.
    {\hspace*{0in}\marginpar{\sloppy \raggedright \it \footnotesize
     $^{\mbox{#1}}$#2}}
    % Change notice.

\newcommand{\key}[1]{{\bf \em #1}\index{#1}}
\newcommand{\mkey}[2]{{\bf \em #1}\index{#1!#2}}
\newcommand{\skey}[2]{{\bf \em #1#2}\index{#1}}
\newcommand{\ikey}[2]{{\bf \em #1}\index{#2}}
\newcommand{\ttkey}[1]{{\tt \bf #1}\index{#1@{\tt #1}}}
% < and > do not work for \tt \bf, hence:
\newcommand{\ttnbkey}[1]{{\tt #1}\index{#1@{\tt #1}}}
\newcommand{\ttmkey}[2]{{\tt \bf #1}\index{#1@{\tt #1}!#2}}
\newcommand{\ttfkey}[2]{{\tt \bf #1}\index{#1@{\tt #1}!for #2@for {\tt #2}}}
\newcommand{\ttakey}[2]{{\tt \bf #1}\index{#2@{\tt #1}}}
\newcommand{\ttamkey}[3]{{\tt \bf #1}\index{#2@{\tt #1}!#3}}
\newcommand{\ttindex}[1]{\index{#1@{\tt #1}}}
\newcommand{\ttmindex}[2]{\index{#1@{\tt #1}!#2}}
\newcommand{\emkey}[1]{{\bf \em #1}\index{#1@{\em #1}}}
\newcommand{\emindex}[1]{\index{#1@{\em #1}}}

\newcommand{\minkey}[1]%
           {{\tt \bf min::#1}\ttindex{min::#1}\ttindex{#1}}
\newcommand{\minmkey}[2]%
           {{\tt \bf min::#1}\ttmindex{min::#1}{#2}\ttmindex{#1}{#2}}
\newcommand{\MUPkey}[1]{{\tt \bf MUP::#1}\ttindex{MUP::#1}\ttindex{#1}}
\newcommand{\MUPmkey}[2]%
           {{\tt \bf MUP::#1}\ttmindex{MUP::#1}{#2}\ttmindex{#1}{#2}}
\newcommand{\minindex}[1]{\ttindex{min::#1}\ttindex{#1}}
\newcommand{\MUPindex}[1]{\ttindex{MUP::#1}\ttindex{#1}}


\newcommand{\secref}[1]{\ref{#1}$^{p\pageref{#1}}$}
\newcommand{\stepref}[1]{\ref{#1}$^{p\pageref{#1}}$}
\newcommand{\appref}[1]{\ref{#1}$^{p\pageref{#1}}$}
\newcommand{\pagref}[1]{p\pageref{#1}}

\newcommand{\EOL}{\penalty \exhyphenpenalty}

\newcount\TildeCatcode
\TildeCatcode=\catcode`\~
\catcode`~=12
\newcommand{\Tilde}{~}
\catcode`~=\TildeCatcode

\newcount\CircumflexCatcode
\CircumflexCatcode=\catcode`\^
\catcode`^=12
\newcommand{\Circumflex}{^}
\catcode`^=\CircumflexCatcode

\newcount\CurlyBraCatcode
\newcount\CurlyKetCatcode
\newcount\SquareBraCatcode
\newcount\SquareKetCatcode
\CurlyBraCatcode=\catcode`{
\CurlyKetCatcode=\catcode`}
\SquareBraCatcode=\catcode`[
\SquareKetCatcode=\catcode`]

\catcode`{=\SquareBraCatcode
\catcode`}=\SquareKetCatcode
\catcode`[=\CurlyBraCatcode
\catcode`]=\CurlyKetCatcode

\newcommand[\CurlyBra][{]
\newcommand[\CurlyKet][}]

\catcode`{=\CurlyBraCatcode
\catcode`}=\CurlyKetCatcode
\catcode`[=\SquareBraCatcode
\catcode`]=\SquareKetCatcode

\newcommand{\ttbrackets}{%
    \renewcommand{\{}{\CurlyBra}%
    \renewcommand{\}}{\CurlyKet}}

\newsavebox{\TILDEBOX}
\begin{lrbox}{\TILDEBOX}
\verb|~|
\end{lrbox}
\newcommand{\TILDE}{\usebox{\TILDEBOX}}

\newsavebox{\BACKSLASHBOX}
\begin{lrbox}{\BACKSLASHBOX}
\verb|\|
\end{lrbox}
\newcommand{\BACKSLASH}{\usebox{\BACKSLASHBOX}}

\newsavebox{\LEFTBRACKETBOX}
\begin{lrbox}{\LEFTBRACKETBOX}
\verb|{|
\end{lrbox}
\newcommand{\LEFTBRACKET}{\usebox{\LEFTBRACKETBOX}}

\newsavebox{\RIGHTBRACKETBOX}
\begin{lrbox}{\RIGHTBRACKETBOX}
\verb|}|
\end{lrbox}
\newcommand{\RIGHTBRACKET}{\usebox{\RIGHTBRACKETBOX}}

\newsavebox{\UNDERLINEBOX}
\begin{lrbox}{\UNDERLINEBOX}
\verb|_|
\end{lrbox}
\newcommand{\UNDERLINE}{\usebox{\UNDERLINEBOX}}

\newsavebox{\CIRCUMFLEXBOX}
\begin{lrbox}{\CIRCUMFLEXBOX}
\verb|^|
\end{lrbox}
\newcommand{\CIRCUMFLEX}{\usebox{\CIRCUMFLEXBOX}}

\newsavebox{\BARBOX}
\begin{lrbox}{\BARBOX}
\verb/|/
\end{lrbox}
\newcommand{\BAR}{\usebox{\BARBOX}}

\newsavebox{\LESSTHANBOX}
\begin{lrbox}{\LESSTHANBOX}
\verb/</
\end{lrbox}
\newcommand{\LESSTHAN}{\usebox{\LESSTHANBOX}}

\newsavebox{\GREATERTHANBOX}
\begin{lrbox}{\GREATERTHANBOX}
\verb/>/
\end{lrbox}
\newcommand{\GREATERTHAN}{\usebox{\GREATERTHANBOX}}

\newlength{\figurewidth}
\setlength{\figurewidth}{\textwidth}
\addtolength{\figurewidth}{-0.40in}

\newsavebox{\figurebox}

\newenvironment{boxedfigure}[1][!btp]%
	{\begin{figure*}[#1]
	 \begin{lrbox}{\figurebox}
	 \begin{minipage}{\figurewidth}

	 \vspace*{1ex}}%
	{
	 \vspace*{1ex}

	 \end{minipage}
	 \end{lrbox}
	 \begin{center}
	 \fbox{\hspace*{0.1in}\usebox{\figurebox}\hspace*{0.1in}}
	 \end{center}
	 \end{figure*}}

\newenvironment{indpar}[1][0.3in]%
	{\begin{list}{}%
		     {\setlength{\itemsep}{0in}%
		      \setlength{\topsep}{0in}%
		      \setlength{\parsep}{1ex}%
		      \setlength{\labelwidth}{#1}%
		      \setlength{\leftmargin}{#1}%
		      \addtolength{\leftmargin}{\labelsep}}%
	 \item}%
	{\end{list}}

\newcommand{\LABEL}[1]{\label{#1}}
\newcommand{\TTKEY}[1]{\ttkey{#1}}
\newcommand{\MINKEY}[1]{{\tt \bf #1}\minindex{#1}}
\newcommand{\MUPKEY}[1]{{\tt \bf #1}\MUPindex{#1}}

\newcommand{\REL}{$^R$}

\begin{document}
        
\title{Internal Design\\[2ex]of the\\[2ex]
       Minimal\\Descriptive Programming\\Language\\[2ex]MIN\\[2ex]
       (Draft 1a)}

\author{Robert L. Walton}

\date{March 2, 2005}
 
\maketitle

\newpage
\begin{center}
\large \bf Table of Contents
\end{center}

\bigskip

\tableofcontents 

\newpage

\section{Introduction}

This document describes the internal design of MIN,
the Minimal Descriptive Programming Language.
This document is written for readers who wish to add C++ code
to a MIN implementation, or who wish to maintain an implementation.

A small number of \skey{abbreviation}s are used throughout this document
and the corresponding code:

\begin{center}
\begin{tabular}{ll}
\ttmkey{aux}{abbreviation}	& auxilary (\secref{AUXILARY}) \\
\ttmkey{gen}{abbreviation}	& general value (\secref{GENERAL-VALUES}) \\
\ttmkey{int}{abbreviation}	& signed integer (\pagref{INT}) \\
\ttmkey{lab}{abbreviation}	& label (\pagref{LABEL-STUBS}) \\
\ttmkey{min}{abbreviation}	& the MIN system \\
\ttmkey{MUP}{abbreviation}	& {\tt min::unprotected} (\pagref{MUP}) \\
\ttmkey{num}{abbreviation}	& number (\pagref{NUMBER-STUBS}) \\
\ttmkey{obj}{abbreviation}	& object (\pagref{OBJECT-STUBS}) \\
\ttmkey{str}{abbreviation}	& string (\pagref{STRING-STUBS}) \\
\ttmkey{uns}{abbreviation}	& unsigned integer (\pagref{UNS}) \\
\end{tabular}
\end{center}

\section{Data}

We first describe MIN data memory.

We give two interfaces to MIN data memory:
the \key{protected interface}, which can be used
by C++ code to access MIN data memory while maintaining the integrity
of that memory, and the \key{unprotected interface}, which provides
more efficient access to MIN data memory but requires the user to
follow certain protocols to be sure the memory is not damaged.

From the syntactic point of view the
only distinction between these interfaces is that code that
uses the unprotected interface must

\begin{center}
\verb|#include  <min_unprotected.h>|
\end{center}

and all unprotected
interface names begin with `\minkey{unprotected::}'.  Code
that uses the unprotected interface typically abbreviates this long
prefix to `\ttmkey{MUP::}{abbreviates {\tt min::unprotected::}}'\label{MUP}
by including the following definition after the `\verb|#include|' statement
above:

\begin{center}
\verb|#define  MUP  min::unprotected|
\end{center}

In this document we will use the abbreviation `\verb|MUP|' for
`\verb|min::unprotected|'.

Some {\tt MUP} functions `produce \key{undefined results}' when their arguments
are out of legal range.
This means that when the arguments are out of range,
function execution may lose control and crash, or may produce result
values out of legal range.  When documentation of a {\tt MUP} function
states that particular argument range checks are not performed,
then the {\tt MUP} function always produces undefined results when its
arguments would not pass these checks,
unless the documentation explicitly says otherwise.

The data of MIN is defined using C-compatible \ttmkey{struct}{C compatible}'s
and \ttmkey{union}{C compatible}'s.  C++ implicitly guarentees the layout of
C-compatible \verb|struct|'s and \verb|union|'s to be C-compatible,
and C has implicit guarentees because of historical C code that
such data will not contain unnecessary unnamed padding.  Neither the
C or C++ standards guarentee the absence of unnecessary unnamed padding, but
MIN depends upon its absence, as does any code that reads and writes
binary files.

As a consequence of using only C-compatible \verb|struct|'s and
\verb|union|'s to define data, MIN does not use member functions,
and uses overloaded functions instead.  Protected functions
have names beginning with `\ttmkey{min::}{in function name}'
only if they have no argument that is a pointer to a MIN defined
datum.  Many protected MIN functions have such pointer arguments
and have overloaded names that do not begin with any class qualifier.
Unprotected MIN functions have names beginning with 
`\ttmkey{MUP::}{in function name}'.

In defining MIN data the following number types are used to be sure
the size of each number is clear:

\begin{center}
\begin{tabular}{l@{~~~~~}l}
\minkey{uns8}	& unsigned 8-bit integer \\
\minkey{int8}	& signed 8-bit integer \\
\minkey{uns16}	& unsigned 16-bit integer \\
\minkey{int16}	& signed 16-bit integer \\
\minkey{uns32}	& unsigned 32-bit integer \\
\minkey{int32}	& signed 32-bit integer \\
\minkey{float32}	& 32-bit IEEE floating point number \\
\minkey{uns64}	& unsigned 64-bit integer \\
\minkey{int64}	& signed 64-bit integer \\
\minkey{float64}	& 64-bit IEEE floating point number \\
\end{tabular}
\end{center}%
\label{MIN::UNS8}%
\label{MIN::INT8}%
\label{MIN::UNS16}%
\label{MIN::INT16}%
\label{MIN::UNS32}%
\label{MIN::INT32}%
\label{MIN::FLOAT32}%
\label{MIN::UNS64}%
\label{MIN::INT64}%
\label{MIN::FLOAT64}%
\label{INT}%
\label{UNS}

Currently planned implementations of MIN assume a compiler that has
direct support for 64 bit integers.  However, use of 64 bit integer
types in these implementations is minimized to make it possible to
modify the implementations to use compilers without such support.

\subsection{Stubs and Bodies}

MIN data memory consists of regions that contain stubs and regions
that contain bodies.  A region is a continguous block
of memory, typically consisting of an integral number of hardware
pages.

\ikey{Stubs}{stub}
are small fixed size units of memory that cannot be relocated:
the usual stub size for MIN is 16 bytes.
Each object has a stub, and the address of the stub is in effect
the internal name of the object.  Some or all atoms, depending
on implementation, have stubs.

A stub is divided into an 8 byte value and an 8 byte control.
The \mkey{value}{of stub} can be an IEEE floating point number,
an 8 character string, or, as we will soon see, a pointer to a body.
It is also possible for a value to hold any other 8 bytes of information.

The control holds a 1 byte type code and other information used,
for example, by the garbage collector.

The type name of a stub is `\minkey{stub}', and a pointer to a stub
has type `\verb|min::stub *|'.\LABEL{MIN::STUB}\footnote{We do
not use `{\tt const min::stub *}' types because such cannot be converted
to general values, since the latter have no way of distinguishing
{\tt const} and non-{\tt const} stubs.}

A \key{body} is a variable sized relocatable block of memory
attached to a particular stub.  A stub may have a single body attached to
it, in which case the stub value is a pointer to that body.
When certain functions are called,
any body can be moved and its corresponding stub value reset to
point at the new location of the body.
Functions with this property are called
`\key{relocating functions}'\label{RELOCATING-FUNCTIONS}
and are marked by {\REL} in documentation.  Included
are functions that allocate objects.
Obtaining a pointer into a body is an unprotected operation, because
the pointer must be maintained if a relocating function is called.

\ikey{Interrupts}{interrupt!and relocation} can relocate bodies.
Therefore interrupts are only allowed
at specific points in the code.  The inline

\begin{center}\begin{tabular}{r@{}l}
\verb|void min::| & \MINKEY{interrupt\REL}\verb| ( void )|
\LABEL{MIN::INTERRUPT} \\
\end{tabular}\end{center}%
\index{interrupt!relocating}

function checks an interrupt
flag, and if that is set, calls an out-of-line function to process
the interrupt.

A body may be \mkey{deallocated}{by moving}
by moving it to unimplemented memory.  When this is done the
stub \mkey{type code}{reset on deallocation}
is reset to the value \minkey{DEALLOCATED}\LABEL{DEALLOCATED-TYPE},
which indicates the body is deallocated.
The function that deallocates a body is:

\begin{center}\begin{tabular}{r@{}l}
\verb|void | & \TTKEY{deallocate\REL}\verb| ( min::stub * s )|
\LABEL{DEALLOCATE} \\
\end{tabular}\end{center}%
\index{deallocate!relocating}

The {\tt is\_deallocated} function described on \pagref{IS_DEALLOCATED}
can be used to test whether the body of a stub has been deallocated.

Bodies are always some multiple
of 8 bytes long, and are allocated on 8 byte boundaries.

\ikey{Protected functions}{protected function!using {\tt assert}}
that take a stub pointer as argument use
\ttmkey{assert}{in protected function} statements to check
the \mkey{type code}{checked by {\tt assert}}
of the stub and various lengths.  Unprotected functions
contain no such checks.

Memory consisting of unrelocatable stubs pointing at relocatable
bodies is called a `\key{stub/\EOL body memory}'.
Thus MIN has a stub/body memory.
The main advantages of stub/body memory are that relocation of bodies
can happen independently of other program activity, and bodies can be
deallocated by program command at any time.\footnote{
Stub/body memories are certainly not new.  For example, Kyoto COMMONLISP
used a stub/body implementation of arrays, and the author has heard about
implementations that go back to the late 1950's or early 60's: see
p33 of the author's thesis, R-CODE, A Very Capable Virtual Computer.}


\subsection{General Values}
\label{GENERAL-VALUES}

A general value can store any of:

\begin{center}
\begin{tabular}{l}
an atom or pointer to an atom \\
a pointer to a stub \\
an auxilary pointer
\end{tabular}
\end{center}

General values are used as attribute names and values in
objects, and as function arguments and return values.

Efficiency aside, it does not matter
whether a general value stores an atom or a pointer
to the atom, as atoms are immutable and cannot be changed.

An \key{auxilary pointer} is an integer that is used by a general value
stored inside an object body to point at some part, called an
\key{auxilary},\label{AUXILARY} of the same body.
There are several subtypes of auxilary pointers.
See~\pagref{AUXILARY-POINTER}.

There are two kinds of MIN implementation: `\key{compact}' and
`\key{loose}'.\label{COMPACT}\label{LOOSE}
A compact implementation uses 32-bit general values, while
a loose implementation uses 64-bit general values.

The value of a compact implementation is that it uses less memory,
but there may be a speed penalty.
The value of a loose implementation is that it may run faster, but
there is a memory penalty.  It is not clear what the speed difference
between the two implementations really is, so both implementations
are offered in order to decide the issue by experiment.

Also compact implementations do not permit more than
about $2^{32}$ objects to exist in memory at one time, whereas
loose implementations permit up to about $2^{44}$ objects.

\subsubsection{General Value Subtypes}
\label{GENERAL-VALUE-SUBTYPES}

A \key{general value} has type \minkey{gen}\LABEL{MIN::GEN} and
is a 32 or 64 bit aligned value that can be of one of the following
subtypes

\begin{center}
\begin{tabular}{l}
a pointer to a stub \\
a 64-bit IEEE floating point direct number atom (64 bit general value only) \\
a 28-bit direct integer atom (32 bit general value only) \\
a 0-5 character direct string atom (64 bit general value only) \\
a 0-3 character direct string atom (32 bit general value only) \\
a 27-bit auxilary list pointer (32 bit general value only) \\
a 27-bit auxilary sublist pointer (32 bit general value only) \\
a 44-bit auxilary list pointer (64 bit general value only) \\
a 44-bit auxilary sublist pointer (64 bit general value only)
\end{tabular}
\end{center}

Numbers and character strings stored inside a \verb|min::gen| value are
called `\key{direct}' values.  Numbers and character strings
stored in stubs or stub bodies which are pointed at by a
\verb|min::gen| value are called `\key{indirect}' values.  An atom is
always stored in only one way by an implementation.  If a number will fit
into a direct value, it is stored as a direct value, and never as an
indirect value.  Similarly if a character string will fit into a direct value,
it is stored as a direct value, and never as an indirect value.

Analogously indirect atoms are stored in only one place in memory, so
two indirect numbers are equal if and only the \verb|min::gen| values
pointing at them point at the same place, and similarly
two indirect characters strings are equal if and only
the \verb|min::gen| values pointing at them point at the same place.

Therefore two atoms are equal if and only if the \verb|min::gen| values
designating them are \verb|==|.

General values that point at stubs can hold stub addresses, or they can hold 
`\skey{virtual stub number}s', \skey{VSN}{'s}, that map to stub addresses.
A VSN is typically mapped to a stub address by shifting it left by 4
bits\footnote{
Stubs are always a power of two in length, e.g. 16 bytes, so VSN's can be
translated to addresses by shifting left.} and possibly adding a base constant.
One effect of using VSN's
instead of addresses is to multiply by 16 the number of
stubs that may exist in memory without needing to use more than 32 bits
to hold the stub address, and the other effect is to increase program
execution time somewhat.

On machines that have 32 bit addresses (e.g.,
the IA32\footnote{Intel Architecture 32-bit, a.k.a, i386 machines.}
machines), stub addresses are always used.  The affect of using stub
addresses or VSN's on the approximate maximum number of stubs is as follows:

\begin{center}
\begin{tabular}{lrr}
			&	Addresses	& VSN's \\[1ex]
32-bit general values	&	$2^{28}$	& $2^{32}$ \\[1ex]
64-bit general values	&	$2^{40}$	& $2^{44}$ \\[1ex]
\end{tabular}
\end{center}

A 32-bit general value direct integer consists of a high order 4-bit
subtype code and a low order 28-bit signed integer stored in offset form,
so the true integer can be derived from the {\tt min::gen} value by
subtracting the {\tt min::gen} representation of zero.
The range of such a direct integer is the same as the range of a 28-bit
two's complement integer: $-2^{27}$ to $2^{27}-1$, inclusive.

Similarly 32-bit general value auxilary pointers consist of a high order
5-bit subtype code
and a low order 27-bit auxilary pointer (see~\pagref{AUXILARY-POINTER}
for a definition of auxilary pointers).  And a 32-bit general value
direct string consists of
an 8-bit subtype code and 24 bits that hold 0 to 3 8-bit {\tt char}'s.

For 64-bit general values the high order 20 bits is used as a subtype
code.  The values chosen for this subtype code make direct strings,
pointers, and auxilary pointers into IEEE Nan (Not-a-Number)
values that are never generated by hardware instructions.

The {\tt min::gen} type has the alignment
properties of either {\tt min::uns32} or {\tt min::uns64},
and in many implementations is {\tt typedef}'ed to the appropriate one
of these two types.  Therefore a function that has only number
and {\tt min::gen} arguments cannot be overloaded, and must have
a name beginning with `{\tt min::}'.

\subsubsection{General Value Compilation}
\label{GENERAL-VALUE-COMPILATION}

The decisions on whether an implementation is compact or loose and
whether the implementation uses addresses or VSN's in general values
that point at stubs must be made when code is compiled.  C++ code
must be compiled after making these decisions.

The following macros are defined to describe these decisions:

\begin{center}
\begin{tabular}{ll}
\TTKEY{MIN\_IS\_COMPACT}	& 1 if compact implemention; 0 if loose
\LABEL{MIN_IS_COMPACT} \\
\TTKEY{MIN\_IS\_LOOSE}		& 1 if loose implemention; 0 if compact
\LABEL{MIN_IS_LOOSE}	 \\
\TTKEY{MIN\_SIZEOF\_GEN}	& 64 if loose implemention; 32 if compact
\LABEL{MIN_SIZEOF_GEN} \\
\TTKEY{MIN\_USES\_ADDRESSES}	& 1 if implemention uses addresses;
				  0 if it uses VSN's
\LABEL{MIN_USES_ADDRESSES} \\
\TTKEY{MIN\_USES\_VSNS}		& 1 if implemention uses VSN's;
				  0 if it uses addresses
\LABEL{MIN_USES_VSNS}	 \\
\end{tabular}
\end{center}

\subsubsection{General Value Functions}
\label{GENERAL-VALUE-FUNCTIONS}

The following functions return {\tt 1} if a {\tt min::gen} datum is of the
indicated subtype and {\tt 0} otherwise:

\begin{center}\begin{tabular}{r@{}l}
\verb|bool min::| & \MINKEY{is\_direct\_int}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_INT} \\
\verb|bool min::| & \MINKEY{is\_direct\_float}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_FLOAT} \\
\verb|bool min::| & \MINKEY{is\_direct\_str}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_STR} \\
\verb|bool min::| & \MINKEY{is\_list\_aux}\verb| ( min::gen v )|
\LABEL{MIN::IS_LIST_AUX} \\
\verb|bool min::| & \MINKEY{is\_sublist\_aux}\verb| ( min::gen v )|
\LABEL{MIN::IS_SUBLIST_AUX} \\
\verb|bool min::| & \MINKEY{is\_stub}\verb| ( min::gen v )|
\LABEL{MIN::IS_STUB} \\
\end{tabular}\end{center}

For a 32-bit general value {\tt is\_direct\_float} is always false.
For a 64-bit general value {\tt is\_direct\_int} is always false.

The following protected functions return the value appropriate for a given
subtype, after checking the subtype with an {\tt assert} statement:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::float64 min::| & \MINKEY{direct\_float\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_FLOAT_OF} \\
\verb|min::int32 min::| & \MINKEY{direct\_int\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_INT_OF} \\
\verb|min::uns64 min::| & \MINKEY{direct\_str\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_STR_OF} \\
\verb|min::stub * min::| & \MINKEY{stub\_of}\verb| ( min::gen v )|
\LABEL{MIN::STUB_OF} \\
\verb|unsigned min::| & \MINKEY{list\_aux\_of}\verb| ( min::gen v )|
\LABEL{MIN::LIST_AUXILARY_OF} \\
\verb|unsigned min::| & \MINKEY{sublist\_aux\_of}\verb| ( min::gen v )|
\LABEL{MIN::SUBLIST_AUXILARY_OF} \\
\end{tabular}\end{center}

Here the \verb|min::uns64| value returned by \minkey{direct\_str\_of}
should be overlaid by a union with a \verb|char[]| buffer, as in
the code:

\begin{indpar}\begin{verbatim}
union { min::uns64 str; char buf[6]; } u;
min::gen v;
. . . .
u.str = min::direct_str_of ( v );
cout << u.buf;
\end{verbatim}\end{indpar}

Here the {\tt min::direct\_str\_of} function merely copies the 3 or
5 characters of the {\tt min::gen} direct string value and
appends a NUL character.
It does this by writing an appropriate value into \verb|v.str|.

The following unprotected functions return the value appropriate for a given
subtype, \underline{without} checking the subtype:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::float64 MUP::| & \MUPKEY{direct\_float\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_FLOAT_OF} \\
\verb|min::int32 MUP::| & \MUPKEY{direct\_int\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_INT_OF} \\
\verb|min::uns64 MUP::| & \MUPKEY{direct\_str\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_STR_OF} \\
\verb|min::stub *  MUP::| & \MUPKEY{stub\_of}\verb| ( min::gen v )|
\LABEL{MUP::STUB_OF} \\
\verb|unsigned MUP::| & \MUPKEY{list\_aux\_of}\verb| ( min::gen v )|
\LABEL{MUP::LIST_AUX_OF} \\
\verb|unsigned MUP::| & \MUPKEY{sublist\_aux\_of}\verb| ( min::gen v )|
\LABEL{MUP::SUBLIST_AUX_OF} \\
\end{tabular}\end{center}

New {\tt min::gen} values can be generated by the following protected
functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( int v )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_INT} \\
\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( min::float64 v )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_FLOAT64} \\
\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( const char * p )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_STR} \\
\verb|min::gen min::| & \MINKEY{new\_gen}\verb| ( min::stub * s )|
\LABEL{MIN::NEW_GEN_OF_STUB} \\
\verb|min::gen min::| & \MINKEY{new\_list\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MIN::NEW_LIST_AUX_GEN} \\
\verb|min::gen min::| & \MINKEY{new\_sublist\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MIN::NEW_SUBLIST_AUX_GEN} \\
\end{tabular}\end{center}

These protected functions check for argument range errors.  Stubs are
\underline{not} allocated by these functions, so an {\tt int}
argument must fit in 28 bits if {\tt min::gen} values
are 32-bits, and the {\tt const char *} strings must be short enough to
fit into a direct value.
The {\tt int} argument will be converted to an IEEE 64-bit floating
point number if the \verb|min::gen| type is 64-bits.  The
{\tt min::float64} argument will always cause an argument range
error if used with 32-bit \verb|min::gen| values.
The {\tt unsigned} argument used to make auxilary pointers must
fit within 27 bits if {\tt min::gen} values are 32-bits, and
within 44 bits if {\tt min::gen} values are 64-bits.

The subtype codes used for 64-bit {\tt min::gen} direct string, stub pointer,
and auxilary pointer
values are chosen so they are not normally generated by the compiler,
run-time system, or program execution.  Therefore a {\tt min::float64}
input to {\tt min::new\_direct\_gen} is assumed not to have these subtype
codes, and no check is made for such, even by range-checking protected
functions.

The following unprotected functions are analogous but do not check for
range errors.

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( int v )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_INT} \\
\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( min::float64 v )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_FLOAT64} \\
\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( const char * p )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_STR} \\
\verb|min::gen MUP::| & \MUPKEY{new\_gen}\verb| ( min::stub * s )|
\LABEL{MUP::NEW_GEN_OF_STUB} \\
\verb|min::gen MUP::| & \MUPKEY{new\_list\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MUP::NEW_LIST_AUX_GEN} \\
\verb|min::gen MUP::| & \MUPKEY{new\_sublist\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MUP::NEW_SUBLIST_AUX_GEN} \\
\end{tabular}\end{center}

The actual string, stub pointer, and auxilary pointer
{\tt min::gen} subtype codes
are implementation dependent.  The following constants equal these
subtype codes:

\begin{center}\begin{tabular}{r@{}l}
\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_INT}
\LABEL{MIN::GEN_DIRECT_INT} \\
\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_FLOAT}
\LABEL{MIN::GEN_DIRECT_FLOAT} \\
\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_STR}
\LABEL{MIN::GEN_DIRECT_STR} \\
\verb|const unsigned min::| & \MINKEY{GEN\_STUB}
\LABEL{MIN::GEN_STUB} \\
\verb|const unsigned min::| & \MINKEY{GEN\_LIST\_AUX}
\LABEL{MIN::GEN_LIST_AUX} \\
\verb|const unsigned min::| & \MINKEY{GEN\_SUBLIST\_AUX}
\LABEL{MIN::GEN_SUBLIST_AUX} \\
\verb|const unsigned min::| & \MINKEY{GEN\_ILLEGAL}
\LABEL{MIN::GEN_ILLEGAL} \\
\end{tabular}\end{center}

\verb|min::GEN_ILLEGAL| is actually illegal as a subtype code.
For 64-bit \verb|min::gen| values, {\tt MIN::\EOL GEN\_DIRECT\_INT} is defined
to be equal to \verb|min::GEN_ILLEGAL|,
and for 32-bit \verb|min::gen| values, \verb|MIN::GEN_DIRECT_FLOAT| is defined
to be equal to \verb|min::GEN_ILLEGAL|.

The following function may be used to retrieve the subtype code field:

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned min::| & \MINKEY{gen\_subtype\_of}\verb| ( min::gen v )|
\LABEL{MIN::GEN_SUBTYPE_OF} \\
\end{tabular}\end{center}

For 64-bit \verb|min::gen| values, this retrieves the high order
20 bits of the value, and then replaces this retrieved value if the value
comes from a direct IEEE 64-bit floating point number.
For 32-bit \verb|min::gen| values, this retrieves
the high order 8 bits, and then zeros any low order bits that are not
part of the subtype code.
In any case, \verb|min::GEN_ILLEGAL| is not a possible value of this function.


\subsection{Body Pointers}
\label{BODY-POINTERS}

Body pointers are relocatable and require special handling to
ensure that thay are up-to-date.  Because of this, functions
that obtain body pointers from stubs are unprotected, and
names of relocating functions, which might relocate bodies, are marked
with the superscript {\REL} in this document.


Relocation can only happen inside relocating functions
(\pagref{RELOCATING-FUNCTIONS}).  When it happens,
the `\key{relocated flag}\,' which is one of the execution flags
described in~\secref{EXECUTION-FLAGS}, is set.

Upon return from the call to any relocating function,
a caller who is using body pointers must check the relocated flag,
and if on, the caller must:

\begin{center}
\begin{tabular}{l}
check that object bodies have not been deallocated \\
recompute all local variables containing pointers into bodies \\
clear the relocated flag \\
remember it has cleared the relocated flag
\end{tabular}
\end{center}

When a function returns to its caller,
it must set the relocated flag if that flag was ever cleared by
the returning function.

Pointers into bodies are recomputed from body pointers stored in stubs,
which are updated by the relocating functions.

The code to do all this has the form:

\begin{indpar}\begin{verbatim}
... some_function ( ... )
{
    bool relocated = min::set_relocated_flag ( false );
    . . . . .
    assert ( . . . == type_of ( . . . ) );
    min::some_body_type * p =
        some_function_returning_a_body_pointer ( ... );
    . . . . . use p . . . . .
    some_relocating_function ( ... );
    if ( min::set_relocated_flag( false ) )
    {
        relocated = true;
        assert_allocated ( . . . );
        p = some_function_returning_a_body_pointer ( ... );
    }
    . . . . . use p . . . . .
    min::set_relocated_flag ( relocated );
    return ...;
}
\end{verbatim}\end{indpar}

The following functions get and set the relocated flag:

\begin{center}\begin{tabular}{r@{}l}
\verb|bool min::| & \MINKEY{relocated\_flag}\verb| ( void )|
\LABEL{MIN::RELOCATED_FLAG} \\
\verb|bool min::| & \MINKEY{set\_relocated\_flag}\verb| ( bool )|
\LABEL{MIN::SET_RELOCATED_FLAG}
\end{tabular}\end{center}

The function to set the flag returns the flag's previous value.

A function that computes a pointer into an object body does not
check the type code of the object stub pointing at the body.  The type
code must be checked separately before the pointer is computed.  If the
pointer is being recomputed after possible relocation, the only check
required relates to the possibility that the object has been deallocated.
This check is most efficiently done by the {\tt assert\_allocated}
function (\pagref{ASSERT_ALLOCATED}).

To simplify code, the following is defined:

\begin{indpar}\begin{verbatim}
class min::relocated
{
public:
    bool relocated;
    min::relocated ( void )
    {
        relocated = min::set_relocated_flag ( false );
    }
    ~ min::relocated ( void )
    {
        min::set_relocated_flag ( relocated );
    }
    operator bool ()
    {
        if ( min::set_relocated_flag ( false ) )
            return relocated = true;
        else
            return false;
    }
}
\end{verbatim}\end{indpar}

which permits the example code given above to be rewritten more conveniently
as:

\begin{indpar}\begin{verbatim}
... some_function ( ... )
{
    min::relocated relocated;
    . . . . .
    assert ( . . . == type_of ( . . . ) );
    min::some_body_type * p =
        some_function_returning_a_body_pointer ( ... );
    . . . . . use p . . . . .
    some_relocating_function ( ... );
    if ( relocated )
    {
        assert_allocated ( . . . );
        p = some_function_returning_a_body_pointer ( ... );
    }
    . . . . . use p . . . . .
    return ...;
    // relocated deconstructor sets relocated flag.
}
\end{verbatim}\end{indpar}

The operation of \ikey{deallocating a body}{dealocate!body}
is considered to be a relocation of the body.  The body pointer in the
stub is pointed at unimplemented virtual memory, and the type code in the stub
is set to {\tt min::DEALLOCATED} (\pagref{DEALLOCATED-TYPE}).

The following function tests whether a stub with a body pointer
has a deallocated body:

\begin{center}\begin{tabular}{r@{}l}
\verb|bool | & \TTKEY{is\_deallocated}\verb| ( min::stub * s )|
\LABEL{IS_DEALLOCATED}
\end{tabular}\end{center}

This function just checks the stub type code to see if it equals
{\tt min::DEALLOCATED} (\pagref{DEALLOCATED-TYPE}).

A check that an object body has not been deallocated may be needed before
a pointer into the body is recomputed after a relocating function has
been called.  Using a deallocated body is
considered to be a fatal programming error, so often no check is necessary,
as a program that uses a deallocated body simply
crashes when it tries to access the unimplemented
virtual memory.

However, there is a limit to the size of unimplemented
memory, so code using very large bodies should always recheck the type
code when reloading a possibly relocated body pointer.  This limit is
guarenteed to be at least the value of the macro:

\begin{center}\begin{tabular}{r@{}l}
(unsigned integer macro)~~ & \TTKEY{MIN\_DEALLOCATED\_LIMIT}
\LABEL{MIN_DEALLOCATED_LIMIT}
\end{tabular}\end{center}

which is used to optimize the inline function:

\begin{center}\begin{tabular}{r@{}l}
\verb|void | & \TTKEY{assert\_allocated}\verb| ( min::stub * s, unsigned size )|
\LABEL{ASSERT_ALLOCATED}
\end{tabular}\end{center}

which expands to the code:

\begin{indpar}\begin{verbatim}
if ( MIN_DEALLOCATED_LIMIT < size )
{
    assert ( ! is_deallocate ( s ) );
}
\end{verbatim}\end{indpar}

If {\tt size} is a constant (such as a {\tt size\_of} expression)
not greater than {\tt MIN\_DEALLOCATED\_\EOL LIMIT},
this code will be optimized away by the compiler.

Note that using

\begin{indpar}\begin{verbatim}
assert ( ! is_deallocate ( s ) );
\end{verbatim}\end{indpar}

instead of {\tt assert\_allocated} can be useful for debugging
improper accesses to deallocated bodies.

\subsection{Stub Control}
\label{STUB-CONTROL}

A stub contains an 8 byte value and an 8 byte \mkey{control}{of stub}.
If the control is viewed as a 64 bit integer, its high order byte
is the \mkey{type code}{high order byte!of stub control}.
The \mkey{high order bit}{of stub type code} of this, which is the high order
bit of the 64 bit control integer, is off if the stub is managed by
the garbage collector (gc), and on otherwise.  In the former case the
stub is said to be `\key{collectible}'.  In the latter case it is
said to be `\key{uncollectible}'.

If the stub is collectible,
the control is used exclusively by the garbage collector,
except for the type code, which is shared between the garbage collector
and the rest of the system.  A typical (but not required)
garbage collector organization of the control of a collectible stub is:

\begin{center}
\begin{tabular}{ll}
high order 8 bits:	& type code \\
next 12 bits:		& gc flags \\
low order 44 bits:	& chain pointer \\
\end{tabular}
\end{center}

The chain pointer is used to build lists of allocated stubs which
the garbage collector manages.

If a stub is uncollectible, its control can be organized in different
ways according to the type code value.  The standard way of organizing
the control is:

\begin{center}
\begin{tabular}{ll}
high order 8 bits:	& type code \\
next 12 bits:		& subtype code \\
low order 44 bits:	& chain pointer \\
\end{tabular}
\end{center}

The main use of uncollectible stubs is as auxilary stubs.
An `\key{auxilary stub}' is an uncollectible stub attached to an object.
When the object is garbage collected, the auxilary stub is freed.  Auxilary
stubs are a means of adding memory to an object without relocating the object.
For example, if the object stores 64-bit IEEE floating point numbers,
a chain of auxilary stubs
can be used to add memory for additional numbers to the
object.  Note that the auxilary stub itself may not contain enough
information to tell the type of the value it stores; one may have to
trace the reference from the object pointing at the auxilary stub
to determine this type.

\subsection{Stub Type Codes}
\label{STUB-TYPE-CODES}

The type code of a stub may be returned by

\begin{center}\begin{tabular}{r@{}l}
\verb|int | & \TTKEY{type\_of}\verb| ( min::stub * s )|
\LABEL{TYPE_OF}
\end{tabular}\end{center}

A determination of whether or not a stub is collectible may be made
by applying the function

\begin{center}\begin{tabular}{r@{}l}
\verb|bool min::| & \MINKEY{is\_collectible}\verb| ( int type )|
\LABEL{MIN::IS_COLLECTIBLE}
\end{tabular}\end{center}

to the type code of the stub.  Notice that type codes are \underline{signed}
integers, so that negative type codes are uncollectible and positive type codes
are collectible.

A partial list of stub type codes is:

\begin{center}
\begin{tabular}{l@{~~~~~}p{4in}}
\tt min::NUMBER
	&	Stub value is an IEEE 64-bit floating point number.
\\
\tt min::SHORT\_STR
	&	Stub value is 0-8 \verb|const char| string, NUL padded.
\\
\tt min::LONG\_STR
	&	Stub value is a pointer at a body of type
	        {\tt min::long\_\EOL string} that contains a
		\verb|const char| vector and its size. 
\\
\tt min::DEALLOCATED
	&	Stub has a deallocated body.
\end{tabular}
\end{center}

A full list of stub type codes complete with page references
is given on \pagref{STUB-TYPE-CODE-LIST}.

\subsection{Stub Values}
\label{STUB-VALUES}

A stub contains a 64-bit value whose type depends upon the stub
type code (\secref{STUB-TYPE-CODES}).  Many stubs are immutable
and their values cannot be written after the stub has been created;
nevertheless we describe unprotected functions below that
write these values.  Unprotected functions are also provided to obtain
body pointers from stubs when these are the values of the stubs.
This cannot be done by protected
functions as body pointers are relocatable and require special
programming be sure they are up-to-date (\secref{BODY-POINTERS}).

\subsection{Number Stubs}
\label{NUMBER-STUBS}

A \key{number stub} has \minkey{NUMBER}\LABEL{NUMBER-TYPE} stub type code and
an immutable \verb|min::float64| value that can be read by

\begin{center}\begin{tabular}{r@{}l}
\verb|min::float64 | & \MINKEY{float64\_of}\verb| ( min::stub * s )|
\LABEL{FLOAT64_OF} \\
\verb|min::float64 MUP::| & \MUPKEY{float64\_of}\verb| ( min::stub * s )|
\LABEL{MUP::FLOAT64_OF}
\end{tabular}\end{center}

and written by

\begin{center}\begin{tabular}{r@{}l}
\verb|void MUP::| &
    \MUPKEY{set\_float64\_of}\verb| ( min::stub * s, min::float64 f )|
\LABEL{MUP::SET_FLOAT64_OF}
\end{tabular}\end{center}

A number stub can be created by

\begin{center}\begin{tabular}{r@{}l}
\verb|void min::stub * MUP::|
	& \MUPKEY{new\_number\REL}\verb| ( min::float64 f )|
\LABEL{MUP::NEW_NUMBER}
\end{tabular}\end{center}

This function is unprotected only because it always creates a new stub,
and does not attempt to return any previously created number stub whose
value equals the argument.

Number stubs are collectible.  Number stubs only exist in compact
implementations; in loose implementations numbers are stored exclusively
in direct number general values.

General values that are numbers can be tested, created, and read
by the following protected functions:



\begin{center}\begin{tabular}{r@{}l}
\verb|int min::| & \MINKEY{is\_number}\verb| ( min::gen v )|
\LABEL{MIN::IS_NUMBER} \\[1ex]
\verb|min::gen min::| &
	\MINKEY{new\_gen\REL} \verb| ( int v )|
\LABEL{MIN::NEW_GEN_OF_INT} \\
\verb|min::gen min::| &
	\MINKEY{new\_gen\REL} \verb| ( min::float64 v )|
\LABEL{MIN::NEW_GEN_OF_FLOAT64} \\[1ex]
\verb|int min::| & \MINKEY{int\_of}\verb| ( min::gen v )|
\LABEL{MIN::INT_OF_GEN} \\
\verb|min::float64 min::| & \MINKEY{number\_of}\verb| ( min::gen v )|
\LABEL{MIN::NUMBER_OF_GEN} \\
\end{tabular}\end{center}

The \verb|min::is_number| function for a 64-bit \verb|min::gen| argument
is just another name for the \verb|min::is_direct_float| function of the same
argument.  For a 32-bit argument the function returns
true if the argument is a direct integer or a stub pointer
pointing at a number stub.

The \verb|min::new_gen| function with \verb|min::float64| argument
and 64-bit \verb|min::gen| value
is just another name for {\tt min::new\_\EOL direct\_\EOL gen}, which
simply changes the type of its argument.
The \verb|min::new_gen| function with \verb|min::float64| argument
and 32-bit \verb|min::gen| value creates a direct integer
if the argument is an integer in the
require range, and otherwise creates a number stub and returns a pointer to
the stub converted to a \verb|min::gen| value.  For 32-bit \verb|min::gen|
values, any \verb|min::float64| argument to \verb|min::new_gen|
that can be represented by a direct integer is so represented, and whenever
such an argument cannot be represented by a direct integer and a number stub
containing the argument value already exists, a new \verb|min::gen| value
pointing at that existing stub is created, and no new stub is created.
Therefore two 32-bit \verb|min::gen| values that represent equal numbers are
themselves \verb|==|.

The \verb|min::new_gen| function with an \verb|int| argument does the
same thing as it would with its argument converted to a \verb|min::float64|
value, but is more efficient in the case where \verb|min::gen| values
are 32 bits and the argument is in the range of a direct integer general
value.

The \verb|min::number_of| function for a 64-bit \verb|min::gen|
argument is just another name for the \verb|min::direct_float_of| function
of the same argument, which after checking the subtype of the argument,
simply changes the type of the argument.  For a 32-bit argument the
function returns any integer stored directly
in the argument converted to a 64-bit IEEE floating point number, or
returns the stub value for any number stub pointed at by the argument.
In this last case the stub type code is checked by an \verb|assert|
statement to be sure the stub is a number stub.

Lastly, the \verb|min::int_of| function does the same thing as the
\verb|min::number_of| followed by conversion to an \verb|int| value,
except that \verb|min::int_of| includes a check that the result
is a pure integer, without any fractional part, and is within the
range of the \verb|int| type, and
\verb|min::int_of| is more efficient when given a 32-bit direct integer
\verb|min::gen| argument.

\subsection{String Stubs}
\label{STRING-STUBS}

In MIN all \verb|char| \skey{string}s\index{char strings@{\tt char} strings}
are NUL terminated UTF-8 encoded UNICODE character strings.
UTF-8 encodes 16 bit UNICODE characters in 1, 2, or 3 \verb|char|'s.

All ASCII characters are encoded as themselves in
the UTF-8 encoding.  This implies that
all ASCII character strings are UTF-8 encoded character
strings with the same characters as their ASCII representation indicates.%
\footnote{ASCII character codes range from 0 through 127.  UTF-8 extends
this by assigning meaning to codes from 128 to 255.}

It is possible for a \verb|char| string to be miscoded UTF-8.  None
of the functions given below, including the protected functions,
check for this.

There are two kinds of string stubs: short strings and long strings.
There are no protected functions directly accessing these.  In addition,
a string of up to 3 characters can be stored within a 32-bit
\verb|min::gen| value, and a string of up to 5 characters can be stored
within a 64-bit \verb|min::gen| value,
without using a stub (\secref{GENERAL-VALUE-SUBTYPES}).
Such strings are called \skey{direct string}s, while strings stored in
stubs or stub bodies which are pointed at by \verb|min::gen| values,
the short and long strings, are called \skey{indirect string}s.
There are protected functions accessing general values that denote
strings of any kind without distinction,
and these are described toward the end of this section, after
short and long strings and their unprotected access functions are
described.

A \key{short string stub}\label{SHORT-STRING-STUB} has
\minkey{SHORT\_STR}\LABEL{SHORT-STR-TYPE} stub type code and
an immutable {\tt min::\EOL uns64} value that holds a NUL padded
8 \verb|char| vector and can be read by


\begin{center}\begin{tabular}{r@{}l}
\verb|min::uns64 MUP::| &
	\MUPKEY{short\_str\_of}\verb| ( min::stub * s )|
\LABEL{MUP::SHORT_STR_OF}
\end{tabular}\end{center}

and written by

\begin{center}\begin{tabular}{r@{}l}
\verb|void MUP::| &
    \MUPKEY{set\_short\_str\_of}\verb| ( min::stub * s, min::uns64 str )|
\LABEL{MUP::SET_SHORT_STR_OF}
\end{tabular}\end{center}

Here the \verb|min::uns64| value returned by \MUPkey{short\_str\_of}
should be overlaid by a union with a \verb|char[ ]| buffer, as in

\begin{indpar}\begin{verbatim}
union { min::uns64 str; char buf[9]; } u;
min::stub * s1, * s2;
. . . .
u.str = MUP::short_str_of ( s1 );
u.buf[8] = 0;	// Be sure result is NUL terminated.
cout << u.buf;
. . . .
u.str = 0;	// Be sure all 8 bytes are NUL padded.
cin >> u.buf;   // Must not read more than 8 characters.
MUP::set_short_str_of ( s2 , u.str );
\end{verbatim}\end{indpar}

Short string values are NUL (zero) padded 0 to 8 \verb|char|
strings.  To be sure any value read is NUL terminated, a NUL (zero)
must be stored after the value read, as is done by \verb|u.buf[8] = 0|
in the example.  To be sure any value written is padded to 8 characters
by NUL, the 8 character value should be zeroed before any string is
copied into it, as is done by \verb|u.str = 0| in the example.

A \key{long string stub}\label{LONG-STRING-STUB} has
\minkey{LONG\_STR}\LABEL{LONG-STR-TYPE} stub type code and
a value that is a pointer to a \minkey{long\_str} type body
which holds an arbitrary length NUL terminated \verb|char| string.

The following is an unprotected function to return a pointer to the
a long string body, and several protected functions to return parts
of that body.\footnote{Of course these protected functions cannot be used
until the unprotected function has been used.  These protected functions
are protected only in the sense that they introduce no
\underline{additional} protection issues.}

\begin{center}\begin{tabular}{r@{}l}
\verb|min::long_str * MUP::| &
	\MUPKEY{long\_str\_of}\verb| ( min::stub * s )|
\LABEL{MUP::LONG_STR_OF} \\
\verb|unsigned | & \TTKEY{length\_of}\verb| ( min::long_str * str )|
\LABEL{LENGTH_OF_LONG_STR} \\
\verb|unsigned | & \TTKEY{hash\_of}\verb| ( min::long_str * str )|
\LABEL{HASH_OF_LONG_STR} \\
\verb|min::uns64 | & \TTKEY{signature\_of}\verb| ( min::long_str * str )|
\LABEL{SIGNATURE_OF_LONG_STR} \\
\verb|const char * | & \TTKEY{str\_of}\verb| ( min::long_str * str )|
\LABEL{STR_OF_LONG_STR} \\
\end{tabular}\end{center}

These functions return a relocatable pointer to the string body,
the length of the string, a 32-bit non-zero \mkey{hash value}{of string}
computed from the string, a 64-bit signature for the string,
and a relocatable pointer to the string.  If the hash value
has not been previously accessed, it is computed and saved in the
string by the function that returns it, causing that function to
take time proportional to the string length.  The 64-bit signature
contains the hash value and the string length.

A string hash value is computed according to the following machine
independent algorithm:

\begin{indpar}\begin{verbatim}
hash = 0
n = length of string
for i = 1 through n:
    c = i'th character of string as unsigned 8 bit integer
    hash = ( hash * 65599 ) + c
\end{verbatim}\end{indpar}

where the final result is truncated to 32 bits.  The constant
is a prime such that multiplication by it is turned into
shifts and adds by compilers: $65599=2^{16}+2^6-1$.\footnote{Another good
constant that could be used is $33$.}

The long string body consists of a 64 bit signature containing
the 32-bit length and 32-bit hash value, followed by a \verb|char|
vector containing the string with the terminating NUL.  The
\verb|char| vector is padded to a multiple of 8 bytes with NUL
bytes, but the terminating NUL and the padding are not included
in the length.  If the hash has not been computed, it is
stored in the header as zero.  It is possible, though very unlikely,
that the hash value will itself be zero, and therefore be mistaken
for an uncomputed hash value when stored in the string body.

The following unprotected versions of the above
functions return the same values as their associated protected function
with the following exceptions:
an uncomputed hash is returned as zero, and the relocatable pointer
to the string permits the string to be written.  Unprotected functions
are also provided to set the length and hash.

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned MUP::| & \MUPKEY{hash\_of}\verb| ( min::long_str * str )|
\LABEL{MUP::HASH_OF_LONG_STR} \\
\verb|char * MUP::| & \MUPKEY{str\_of}\verb| ( min::long_str * str )|
\LABEL{MUP::STR_OF_LONG_STR} \\
\verb|void MUP::| &
   \MUPKEY{set\_length\_of}\verb| ( min::long_str * str, unsigned length )|
\LABEL{MUP::SET_LENGTH_OF_LONG_STR} \\
\verb|void MUP::| &
   \MUPKEY{set\_hash\_of}\verb| ( min::long_str * str, unsigned hash )|
\LABEL{MUP::SET_HASH_OF_LONG_STR} \\
\end{tabular}\end{center}

The following are protected functions that operate on both short and long
strings.  Some of these functions have the same (overloaded) names
as standard C library string functions, and have the same definition
except that the string source is represented by a short or long string
stub.

The functions

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned | & \TTKEY{strlen}\verb| ( min::stub * s )|
\LABEL{STRLEN} \\
\verb|unsigned | & \TTKEY{strhash}\verb| ( min::stub * s )|
\LABEL{STRHASH} \\
\verb|min::uns64 | & \TTKEY{strsignature}\verb| ( min::stub * s )|
\LABEL{STRSIGNATURE} \\
\end{tabular}\end{center}

return the length of the string (excluding the terminating NUL),
the hash value of the string, and the signature of the string.
The low order bits of the hash value are random, so it can be
truncated to provide a random hash.  The signatures of two strings
are equal if the strings are equal, but there is a small chance
the signatures of unequal strings will be equal.\footnote{The chance
is much greater for the signature used by MIN than it would be
for an MD5 signature, which has the same length but is much slower
to compute.}

The functions

\begin{center}\begin{tabular}{r@{}l}
\verb|char * | & \TTKEY{strcpy}\verb| ( char * p, min::stub * s )|
\LABEL{STRCPY} \\
\verb|char * | &
	\TTKEY{strncpy}\verb| ( char * p, min::stub * s, unsigned n )|
\LABEL{STRNCPY} \\
\end{tabular}\end{center}

copy a string from a MIN short or long string to a buffer pointed at
by \verb|p|.  Copying stops when a NUL is copied or when the
\verb|strncpy| function copies the \verb|n|'th \verb|char|.  The value
of \verb|p| is returned.

The following function creates a short or long string stub.  If the
input has 8 or fewer characters, a short stub is created: otherwise
a long stub is created.

\begin{center}\begin{tabular}{r@{}l}
\verb|void min::stub * MUP::|
	& \MUPKEY{new\_str\REL}\verb| ( const char * p )|
\LABEL{MUP::NEW_STR} \\
\end{tabular}\end{center}

This function is unprotected only because it always creates a new stub,
and does not attempt to return any previously created string stub whose
string equals the argument.

The following are protected functions with same definitions as above but
with general value arguments.  The general values must hold a
direct string value or a pointer to a short or long string stub.

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned min::| & \MINKEY{strlen}\verb| ( min::gen v )|
\LABEL{MIN::STRLEN_OF_GEN} \\
\verb|unsigned min::| & \MINKEY{strhash}\verb| ( min::gen s )|
\LABEL{MIN::STRHASH_OF_GEN} \\
\verb|min::uns64 min::| & \MINKEY{strsignature}\verb| ( min::gen s )|
\LABEL{MIN::STRSIGNATURE_OF_GEN} \\
\verb|char * min::| & \MINKEY{strcpy}\verb| ( char * p, min::gen s )|
\LABEL{MIN::STRCPY_OF_GEN} \\
\verb|char * min::| &
	\MINKEY{strncpy}\verb| ( char * p, min::gen s, unsigned n )|
\LABEL{MIN::STRNCPY_OF_GEN} \\
\end{tabular}\end{center}

Some of these functions correspond to the standard C/C++
{\tt strlen}, {\tt strcpy}, and {\tt strncpy} functions, and differ
from these only in that instead of taking a {\tt char *} source string
argument, these functions take a {\tt min::gen} source argument.

The following functions test general values to see if they are a string,
and create new general values.

\begin{center}\begin{tabular}{r@{}l}
\verb|int min::| & \MINKEY{is\_str}\verb| ( min::gen v )|
\LABEL{MIN::IS_STR_OF_GEN} \\[1ex]
\verb|min::gen min::| &
    \MINKEY{new\_gen\REL} \verb| ( const char * p )|
\LABEL{MIN::NEW_GEN_OF_STR} \\
\end{tabular}\end{center}

A general value is a string if it holds a string itself or if it
holds a stub pointer at a short or long string.  When a general value
is created, if the input string is short enough for the general value
to hold the string itself, a direct string general value is created, and
otherwise, if the input string is 8 or fewer {\tt char}'s, a short
string stub is created, and otherwise a long string stub is created.

When \verb|min::new_gen| function is given a string too long to fit
in a direct string value, it first searches to see if any equal string
exists.  If such a string exists, a pointer to the stub of the existing
string is returned in the new \verb|min::gen| value, and no new stub
is created.  Thus if two string \verb|min::gen| values are equal as
strings, they have \verb|==| \verb|min::gen| values.

\begin{quote}
Implementation note: To ensure that no two string stubs have the same
\verb|char| string, a hash table is required.
This is integrated with the garbage
collector (GC).  The GC has to maintain a list of all allocated stubs,
which it does (normally) using the chain pointers in the stub.  For
the case of strings, the GC maintains this list as a hash table, which
uses a vector to hold the heads of lists threaded through the stub
chain pointers.
\end{quote}


\subsection{Label Stubs}
\label{LABEL-STUBS}

Attribute labels are often single strings or numbers.  But they may be
sequences of strings and numbers.  Such sequences are represented by
\key{label} stubs.\footnote{Labels could also be represented by
sublists stored inside objects (\pagref{LIST-LEVEL}), but each label tends to
be reused by many objects, and storing it inside each using object
would be inefficient.}

A label is essentually just a vector of general values, with the special
property that no two distinct label stubs may have equal vectors of
general values.  However, the vector may be stored in a chain of stubs,
and not in a body.  The exact manner in which the vector is stored is
hidden from the user.

A \key{label stub}\label{LABEL-STUB} has \minkey{LABEL}\LABEL{LABEL-TYPE}
stub type code.  The label may be read by the protected functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned | & \TTKEY{lab\_of}%
    \verb| ( min::gen * p, unsigned n, min::stub * s )|
\LABEL{LAB_OF} \\
\verb|unsigned min::| & \MINKEY{lab\_of}%
    \verb| ( min::gen * p, unsigned n, min::gen v )|
\LABEL{MIN::LAB_OF_GEN} \\
\end{tabular}\end{center}

These read an intial segment of the label vector into the location
addressed by {\tt p}.  If the label vector has {\tt n} or more elements,
the first {\tt n} elements are read.  Otherwise, as many elements as
the label vector has are read.  The number of elements read is returned
in any case.  The label can be denoted by either its stub address or
by a general value pointing at its stub address.

The length of a label is the number of elements (general values) in the label.
Usually this is found my just reading the label, as labels tend to be
short.  For example, a convention might (or might not) be adopted that
attribute labels have at most 10 elements.  Then providing output vectors
to the above functions with 11 elements would not only allow all legal
attribute labels, but would detect illegally long ones.

The length of a label may be read by the following functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned | & \TTKEY{lablen}\verb| ( min::stub * s )|
\LABEL{LABLEN} \\
\verb|unsigned min::| & \MINKEY{lablen}\verb| ( min::gen v )|
\LABEL{MIN::LABLEN_OF_GEN} \\
\end{tabular}\end{center}

The hash value of a label may be computed by the following functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned | & \TTKEY{labhash}\verb| ( min::stub * s )|
\LABEL{LABHASH} \\
\verb|unsigned min::| & \MINKEY{labhash}\verb| ( min::gen v )|
\LABEL{MIN::LABHASH_OF_GEN} \\
\verb|unsigned min::| & \MINKEY{labhash}%
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MIN::LABHASH_OF_GEN_VECTOR} \\
\end{tabular}\end{center}

The last function computes the hash value for a label that could be created
from the given vector of {\tt n} general values.  The hash of a vector of
general values is computed by the following machine independent algorithm:

\begin{indpar}\begin{verbatim}
hash = 0
n = length of vector
for i = 1 through n:
    h = hash value of i'th element of vector
    hash = ( hash << 7 ) + c
    hash = ( hash >> 32 ) + hash
    hash = hash % ( 2**32 )
\end{verbatim}\end{indpar}

where \verb|<<| and \verb|>>| are left and right shifts of unsigned
integers, \verb|%| is the `mod' operation, and \verb|**| is exponentiation.

A label may be created by the following unprotected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::stub * MUP::| & \MUPKEY{new\_label}%
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MUP::NEW_LABEL} \\
\end{tabular}\end{center}

This function is unprotected only because it always creates a new stub,
and does not attempt to return any previously created label stub whose
elements equal those given as function arguments.

A label may be created by the following protected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen min::| & \MINKEY{new\_gen}%
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MIN::NEW_GEN_OF_GEN_VECTOR} \\
\end{tabular}\end{center}

This function returns any existing label with elements equal to
those given by the function arguments, in preference to creating a new
label.

A label may be tested by the following protected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|bool min::| & \MINKEY{is\_label}\verb| ( min::gen v )|
\LABEL{MIN::IS_LABEL_OF_GEN} \\
\end{tabular}\end{center}

\subsection{Label Pair Stubs}
\label{LABEL-PAIR-STUBS}

Double arrow labels are pairs of attribute labels, because in order to
know a double arrow valued attribute of an object X, you must know the
value Y of the attribute (Y must be an object), the label of the attribute, and
also the label of the attribute in object Y that is the other end of the double
arrow.  Double arrow labels are represented by \key{label pair} stubs.%
\footnote{Label pairs could also be represented by
sublists stored inside objects (\pagref{LIST-LEVEL}), but each label pair
tends to be reused by many objects, and storing it inside each using object
would be inefficient.}

A \key{label pair stub}\label{LABEL-PAIR-STUB}
has \minkey{LABEL\_PAIR}\LABEL{LABEL-PAIR-TYPE}
stub type code.  It stores two \verb|min::gen| elements
called the \mkey{label}{of label pair} and \mkey{co-label}{of label pair}
of the pair.  These can be read by the protected functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen | & \TTKEY{label\_of}\verb| ( min::stub * s )|
\LABEL{LABEL_OF} \\
\verb|min::gen min::| & \MINKEY{label\_of}\verb| ( min::gen v )|
\LABEL{MIN::LABEL_OF_GEN} \\
\verb|min::gen | & \TTKEY{co\_label\_of}\verb| ( min::stub * s )|
\LABEL{CO_LABEL_OF} \\
\verb|min::gen min::| & \MINKEY{co\_label\_of}\verb| ( min::gen v )|
\LABEL{MIN::CO_LABEL_OF_GEN} \\
\end{tabular}\end{center}

A label pair may be created by the following unprotected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::stub * MUP::| & \MUPKEY{new\_label\_pair}%
    \verb| ( min::gen label, min::gen co_label )|
\LABEL{MUP::NEW_LABEL_PAIR} \\
\end{tabular}\end{center}

This function is unprotected only because it always creates a new stub,
and does not attempt to return any previously created label pair stub whose
label and co-label elements equal those given as function arguments.

A label pair may be created by the following protected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen min::| & \MINKEY{new\_gen}%
    \verb| ( min::gen label, min::gen co_label )|
\LABEL{MIN::NEW_GEN_OF_GEN_PAIR} \\
\end{tabular}\end{center}

This function returns any existing label pair with label and
co-label elements equal to those given by the function arguments,
in preference to creating a new label pair.

A label pair may be tested by the following protected function:

\begin{center}\begin{tabular}{r@{}l}
\verb|bool min::| & \MINKEY{is\_label\_pair}\verb| ( min::gen v )|
\LABEL{MIN::IS_LABEL_PAIR} \\
\end{tabular}\end{center}

The \key{co-pair} of a label pair $X$ is the label pair $Y$ such that
the label of $Y$ is the co-label of $X$ and the co-label of $Y$
is the label of $X$.  When a label pair is created in memory, typically
both it and its co-pair are created at the same time.  Then given a label
pair, the implementation can rapidly find its co-pair.  Protected
functions for doing this are:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::stub * | & \TTKEY{co\_pair\_of}\verb| ( min::stub * s )|
\LABEL{CO_PAIR_OF} \\
\verb|min::gen min::| & \MINKEY{co\_pair\_of}\verb| ( min::gen v )|
\LABEL{MIN::CO_PAIR_OF_GEN} \\
\end{tabular}\end{center}


\subsection{Object Stubs}
\label{OBJECT-STUBS}

An object is conceptually a hash table that maps attribute names to
attribute values.
The part of the hash table that maps small
unsigned integer attribute names is actually a vector.

A double arrow is a joined pair of attributes in different objects.
A double arrow valued attribute of an object
is represented just like other attributes,
except that a pair of attribute names is given instead of a single
attribute name.  The value of the attribute is the other object,
and the extra attribute name is the name of the attribute in that
other object which is joined to the represented double arrow valued attribute.
The attribute name pair is represented by general value pointing at
a label pair stub (\secref{LABEL-PAIR-STUBS}).

An object has a body that consists of the following 5 parts in
the order given:

\begin{center}
\begin{tabular}{l}
header \\
hash table \\
attribute vector \\
unused area\\
auxilary area
\end{tabular}
\end{center}

The header contains the sizes of the other 4 parts.  The hash table
stores attribute label/value pairs, for attributes whose labels that are not
small unsigned integers.
The vector stores attribute values for attributes whose
labels are small unsigned integers.  The auxilary area stores various overflow
data from the hash table and list areas.

The hash table is of fixed size; its size can only be changed by relocating
the object body.  The list grows up from the hash table into the unused
area, and the auxilary storage grows down from the end of the body into
the unused area.

There are two kinds of objects: short and long.  A \key{short object}
has a header that stores 16 bit unsigned sizes.  A \key{long object}
has a header that stores 32 bit unsigned sizes.  Otherwise there is
no essential difference between a short and a long object.  The functions
that create attributes convert automatically from short to
long objects when required.  Conversion in either direction, and compaction
of objects, may occur when object bodies are relocated during garbage
collection.

There are protected functions accessing general values that denote
objects of any kind without distinction,
and these are described toward the end of this section, after
short and long objects and their unprotected access functions are
described.

A \key{short object stub}\label{SHORT-OBJECT-STUB} has
\minkey{SHORT\_OBJ}\LABEL{SHORT-OBJ-TYPE} stub type code and
a value that is a pointer to a \minkey{short\_obj} type body
which holds the 5 parts of the object.
The header consists of 4 16-bit unsigned integers which are, in order:

\begin{center}
\begin{tabular}{l}
hash table size \\
attribute vector size \\
unused area size \\
auxilary area size \\
\end{tabular}
\end{center}

A \key{long object stub}\label{LONG-OBJECT-STUB} has
\minkey{LONG\_OBJ}\LABEL{LONG-OBJ-TYPE} stub type code and
a value that is a pointer to a \minkey{long\_obj} type body
which holds the 5 parts of the object.  A long object body is
the same as a short object body except the 4 header integers
are 32-bit unsigned integers instead of 16-bit unsigned integers.

A pointer to the body and the sizes can be obtained by the following
functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::short_obj * MUP::| &
	\MUPKEY{short\_obj\_of}\verb| ( min::stub * s )|
\LABEL{MUP::SHORT_OBJ_OF} \\
\verb|min::long_obj * MUP::| &
	\MUPKEY{long\_obj\_of}\verb| ( min::stub * s )|
\LABEL{MUP::LONG_OBJ_OF} \\
\verb|unsigned | & \TTKEY{hash\_table\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{HASH_TABLE_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{hash\_table\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{HASH_TABLE_SIZE_OF_LONG_OBJ} \\
\verb|unsigned | & \TTKEY{obj\_vector\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{OBJ_VECTOR_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{obj\_vector\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{OBJ_VECTOR_SIZE_OF_LONG_OBJ} \\
\verb|unsigned |
    & \TTKEY{auxilary\_area\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{AUXILARY_AREA_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned |
    & \TTKEY{auxilary\_area\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{AUXILARY_AREA_SIZE_OF_LONG_OBJ} \\
\verb|unsigned |
    & \TTKEY{unused\_area\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{UNUSED_AREA_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned |
    & \TTKEY{unused\_area\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{UNUSED_AREA_SIZE_OF_LONG_OBJ} \\
\verb|unsigned | & \TTKEY{total\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{TOTAL_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{total\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{TOTAL_SIZE_OF_LONG_OBJ} \\
\end{tabular}\end{center}

Here the total size is the sum of the other four sizes.

All sizes are in units of \verb|min::gen| values.  Aside from its header,
the object body is just a vector of \verb|min::gen| values.  The total
size does \underline{not} include the header.

The data structure of an object body can be viewed at any of three levels:
vector level, list level, and attribute level.

At the \key{vector level}, the body is viewed as
a \key{body vector} of \verb|min::gen| values.  A pointer to the
body vector is returned by the following functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|const min::gen * |
	& \TTKEY{body\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{BODY_VECTOR_OF_SHORT_OBJ} \\
\verb|const min::gen * |
	& \TTKEY{body\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{BODY_VECTOR_OF_LONG_OBJ} \\
\verb|min::gen * MUP::|
	& \MUPKEY{body\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{MUP::BODY_VECTOR_OF_SHORT_OBJ} \\
\verb|min::gen * MUP::|
	& \MUPKEY{body\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{MUP::BODY_VECTOR_OF_LONG_OBJ} \\
\end{tabular}\end{center}

The protected function only allows reading of body vector elements,
while the unprotected function allows reading and writing of elements.

The body vector is divided into 5 parts,
which are, in order, the {object body header},
the \key{hash table}, \key{object vector},
\key{unused area}, and \key{auxilary area}.
The header and unused area are not actually \verb|min::gen| values,
and should not be accessed using a body vector pointer.

The value of an \key{auxilary pointer}\label{AUXILARY-POINTER}
is an unsigned integer
that is the index of a \verb|min::gen|
value in the body vector.
Auxilary pointers with zero value do not address a body vector
element, since they point into the header, and these are given
special meanings.

The indices of the beginning of the hash table and object vector
can be obtained by the following protected functions:

\begin{center}\begin{tabular}{r@{}l}
\verb|unsigned |
	& \TTKEY{hash\_table\_of}\verb| ( min::short_obj * so )|
\LABEL{HASH_TABLE_OF_SHORT_OBJ} \\
\verb|unsigned |
	& \TTKEY{hash\_table\_of}\verb| ( min::long_obj * lo )|
\LABEL{HASH_TABLE_OF_LONG_OBJ} \\
\verb|unsigned |
	& \TTKEY{object\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{OBJECT_VECTOR_OF_SHORT_OBJ} \\
\verb|unsigned |
	& \TTKEY{object\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{OBJECT_VECTOR_OF_LONG_OBJ} \\
\end{tabular}\end{center}

At the \key{list level},\label{LIST-LEVEL}
the body consists of two vectors whose
elements are lists.  The two vectors are the hash table, and the
object vector.  The elements of the lists are non-auxilary-pointer
\verb|min::gen| values and sublists.  The lists are constructed with
the help of the two kinds of auxilary pointers:

\begin{center}
\begin{tabular}{lp{4in}}
\key{list pointer}	& The list is continued at the target of the list
			  pointer. \\
\key{sublist pointer}	& A sublist starts at the target of the sublist
			  pointer. \\
\end{tabular}
\end{center}

and two constant values:

\begin{center}\begin{tabular}{r@{}lp{3in}}
\verb|const min::gen min::| & \MINKEY{LIST\_END} \LABEL{MIN::LIST_END}
	& The list ends here.  This actually equals a list pointer
	  with zero index. \\
\verb|const min::gen min::| & \MINKEY{EMPTY\_LIST} \LABEL{MIN::EMPTY_LIST}
	& Denotes a list element that is itself an empty list.  This actually
	  equals a sublist pointer with zero index.
\end{tabular}\end{center}

Each hash table entry begins a list, as does each object vector entry.
If the beginning of the list is \verb|min::LIST_END| value, the list is
empty.
If the beginning of the list is a non-auxilary-pointer \verb|min::gen|
value, the list consists of one element which equals just that value.
If the beginning of the list is a \verb|min::EMPTY_LIST| value, the
the list consists of one element which equals just an empty sublist.
If the beginning of the list is a sublist pointer, the list consists
of one element which equals the sublist pointed at by the sublist pointer.
Otherwise the beginning of the list is a list pointer that points at the
location of the first list element.

Given the location of a list element, the value of the list element
can be a non-auxilary-pointer \verb|min::gen| value, a sublist pointer
pointing at a sublist which equals the element,
a \verb|min::EMPTY_LIST| value denoting an element that is an empty
sublist, a list pointer pointing at a continuation of the list,
or \verb|min::LIST_END| indicating the there is no element because
the list ends.

A \minkey{list\_pointer} can be used to move around in a object at
the list level.  The functions for using a list pointer are:

\begin{center}\begin{tabular}{r@{}l}
(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::short_obj * so )|
\LABEL{MIN::LIST_POINTER_OF_SHORT_OBJ} \\
(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::long_obj * lo )|
\LABEL{MIN::LIST_POINTER_OF_LONG_OBJ} \\
(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::gen obj )|
\LABEL{MIN::LIST_POINTER_OF_GEN} \\
\verb|unsigned |
	& \TTKEY{start}\verb| ( min::list_pointer & lp, unsigned p )|
\LABEL{START_OF_LIST_POINTER} \\
\verb|unsigned |
	& \TTKEY{next}\verb| ( min::list_pointer & lp )|
\LABEL{NEXT_OF_LIST_POINTER} \\
\verb|unsigned |
	& \TTKEY{current}\verb| ( min::list_pointer & lp )|
\LABEL{CURRENT_OF_LIST_POINTER} \\
\verb|unsigned |
	& \TTKEY{start\_sublist}\verb| ( min::list_pointer & lp, unsigned p )|
\LABEL{START_SUBLIST_OF_LIST_POINTER} \\
\end{tabular}\end{center}

A list pointer is created to move around in a particular object.
Once created it can be started on a new list by the
{\tt start} function, which takes the index of the first
body vector element of the list.  This index may point into the
hash table, object vector, or auxilary area.  The {\tt start} function
returns the body vector index of the first element of the list, or returns
{\tt 0} if the list is empty.  The index given to {\tt start}
may point at a list pointer or \verb|min::LIST_END| valued body vector element,
but the value returned by {\tt start} may not point at such an element.

The {\tt next} function moves the list pointer to the next element of the
list it currently points at, and returns the body vector index of that
element.  It returns {\tt 0} if there is no element because the end of the
list has been reached.  After the end of a list has been reached, additional
calls to {\tt next} will do nothing.  If a non-zero index is returned,
that \underline{cannot} point at a list pointer or \verb|min::LIST_END| valued
body vector element.

The {\tt current} function just returns the body vector index of the element
the list pointer currently points at, or returns {\tt 0} if there is no
such element, e.g., because the pointer is at the end of a list.

A non-zero index returned by {\tt start}, {\tt next}, or {\tt current}
for a list pointer {\tt X} can index an
auxilarly pointer only if the list element indexed is a sublist.  In this
situation the {\tt start\_sublist} function can be given the index
to set a list pointer to the beginning of the sublist.  The index given
the {\tt start\_sublist} function must index a body vector element
whose value is a sublist pointer or \verb|min::EMPTY_LIST|.

At the \key{attribute level}, the object is a set of attribute name/value
pairs.  If the name is an unsigned integer small enough to index an
object vector element, then the value is stored in the object vector element
indexed by the name.  If the name is a double arrow label pair whose
first component is an unsigned integer small enough to index an object
vector element, then that object vector element is set to the representation
of a list of two elements, the first being the label pair, and the second
being the attribute value.

Otherwise the attribute name/value pair is stored in
the hash table.  Each hash table entry represents a list whose elements
alternate between attribute names and attribute values.  Thus there are
an even number of elements of a hash table entry list, and in each pair
of elements, the attribute name is first, and the corresponding attribute
value is second.  Double arrows are stored by storing a label pair
where the attribute name would normally be.

Sublists are not used at the attribute level.

The following protected functions access attributes:

\begin{center}\begin{tabular}{r@{}l}
\verb|min::gen | & \TTKEY{getg}\verb| ( min::short_obj * so, min::gen name )|
\LABEL{GETG_FROM_SHORT_OBJ} \\
\verb|min::gen | & \TTKEY{getg}\verb| ( min::long_obj * lo, min::gen name )|
\LABEL{GETG_FROM_LONG_OBJ} \\
\verb|min::gen | & \TTKEY{getg}\verb| ( min::stub * s, min::gen name )|
\LABEL{GETG_FROM_STUB} \\
\verb|min::gen min::| & \MINKEY{getg}\verb| ( min::gen obj, min::gen name )|
\LABEL{MIN::GETG} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::short_obj * so, int index )|
\LABEL{GETI_FROM_SHORT_OBJ} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::long_obj * lo, int index )|
\LABEL{GETI_FROM_LONG_OBJ} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::stub * s, int index )|
\LABEL{GETI_FROM_STUB} \\
\verb|min::gen min::| & \MINKEY{geti}\verb| ( min::gen obj, int index )|
\LABEL{MIN::GETI} \\
\end{tabular}\end{center}

These functions
read an attribute value given an attribute name and an object.  The object
can be specified by either giving a pointer to its body or its stub, or by
giving a \verb|min::gen| value that points to the stub.  The name can be
specified either by giving a \verb|min::gen| value or by giving
an \verb|int| if the name is an integer index.  The function names indicate
the type of name given, as the name types themselves are both numeric, and may
lead to overloaded function confusion.  If there is no
attribute of the object with the given name, these functions return the
value

\begin{center}\begin{tabular}{r@{}l}
\verb|const min::gen min::| & \MINKEY{MISSING}
\LABEL{MIN::MISSING}
\end{tabular}\end{center}

which is a special atom not equal to any number or character string.

In all functions that access attributes a \verb|min::gen|
name that is an integer numerically equal to an \verb|int| index names the
same attribute as the index.

Attribute values can be set by the protected functions

\begin{center}\begin{tabular}{r@{}l}
\verb|void | & \TTKEY{putg\REL}%
	\verb| ( min::short_obj * so, min::gen name, min::gen value )|
\LABEL{PUTG_TO_SHORT_OBJ} \\
\verb|void | & \TTKEY{putg\REL}%
	\verb| ( min::long_obj * lo, min::gen name, min::gen value )|
\LABEL{PUTG_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{putg\REL}\verb| ( min::stub * s, min::gen name, min::gen value )|
\LABEL{PUTG_TO_STUB} \\
\verb|void min::| &
    \MINKEY{putg\REL}\verb| ( min::gen obj, min::gen name, min::gen value )|
\LABEL{MIN::PUTG} \\
\verb|void | & \TTKEY{puti\REL}%
	\verb| ( min::short_obj * so, int index, min::gen value )|
\LABEL{PUTI_TO_SHORT_OBJ} \\
\verb|void | & \TTKEY{puti\REL}%
	\verb| ( min::long_obj * lo, int index, min::gen value )|
\LABEL{PUTI_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{puti\REL}\verb| ( min::stub * s, int index, min::gen value )|
\LABEL{PUTI_TO_STUB} \\
\verb|void min::| &
    \MINKEY{puti\REL}\verb| ( min::gen obj, int index, min::gen value )|
\LABEL{MIN::PUTI} \\
\end{tabular}\end{center}

that set the attribute's value given the attribute's name and an object.
The object and name can be specified as for the get functions.
If the attribute
value is given as \verb|min::MISSING|, the attribute is deleted from the
object if the attribute previously had a value.  It is never an error
if the attribute did not previously have a value.

Attribute values can be set to double arrows by the protected functions

\begin{center}\begin{tabular}{r@{}l}
\verb|void | &
    \TTKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_SHORT_OBJ} \\
\verb|void | &
    \TTKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s1, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_STUB} \\
\verb|void min::| &
    \MINKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj1, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{MIN::DOUBLE_PUTG} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_SHORT_OBJ} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s1, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_STUB} \\
\verb|void min::| &
    \MINKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj1, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{MIN::DOUBLE_PUTI} \\
\end{tabular}\end{center}

which set an attribute of each of the specified objects, like a pair
of simultaneous put operations.
The first object and the attribute names can be specified as for the
get functions,
but the second object must be specified by a \verb|min::gen| value.
Any previous values of the attributes are deleted.  When a double arrow
attribute is deleted using the object and attribute name of one of its
ends, the other end is deleted too.

\clearpage

\section{Code and Execution}

\subsection{Execution Flags}
\label{EXECUTION-FLAGS}

\section{TBD Implementation Ideas}


\subsection{Stack and not Ephemeral}

Instead of ephemeral, we use stack objects.  A stack stub is a stub that
is only reachable from pointers in the stack.   When a stack stub
pointer (as a general value) is stored in a non-stack object, the price
of tracing what it points at to make its target non-stack is paid.
This is a logical time to pay this cost.

\clearpage

\appendix

\centerline{\Large \bf Appendices}

\section{C/C++ Interface}
\label{C/C++-Interface}

The declarations here differ from legal C/C++ code in that
we write

\begin{indpar}\begin{verbatim}
struct min::stub;
bool min::is_collectible ( int type );
\end{verbatim}\end{indpar}

which is not legal C or C++ when what we mean is

\begin{indpar}\begin{verbatim}
struct min
{
    struct stub;
    bool is_collectible ( int type );
};
\end{verbatim}\end{indpar}

{
\renewcommand{\LABEL}[1]{\dotfill~\pagref{#1}}
\renewcommand{\TTKEY}[1]{{\tt ~~#1~~}}
\renewcommand{\MINKEY}[1]{{\tt ~~#1~~}}
\renewcommand{\MUPKEY}[1]{{\tt ~~#1~~}}
\newcommand{\ARGBREAK}{\\&{\tt ~~~~~}}
\newcommand{\INDEXHEADER}[1]{{\bf #1}:}

\INDEXHEADER{Compilation Macros}

\begin{indpar}[0.2in]

% The ...KEY macros must be preceeded by a \verb.
\verb||\TTKEY{MIN\_IS\_COMPACT}
\LABEL{MIN_IS_COMPACT} \\
\verb||\TTKEY{MIN\_IS\_LOOSE}
\LABEL{MIN_IS_LOOSE}	 \\
\verb||\TTKEY{MIN\_SIZEOF\_GEN}
\LABEL{MIN_SIZEOF_GEN} \\
\verb||\TTKEY{MIN\_USES\_ADDRESSES}
\LABEL{MIN_USES_ADDRESSES} \\
\verb||\TTKEY{MIN\_USES\_VSNS}
\LABEL{MIN_USES_VSNS}

\end{indpar}

\INDEXHEADER{Data Declarations}

\begin{indpar}[0.2in]

\verb|min::|\MINKEY{stub} \LABEL{MIN::STUB}
\\
\verb|min::|\MINKEY{gen} \LABEL{MIN::GEN}

\end{indpar}

\INDEXHEADER{Stub Type Codes}\label{STUB-TYPE-CODE-LIST}

\begin{indpar}[0.2in]

\verb|min::|\MINKEY{DEALLOCATED} \LABEL{DEALLOCATED-TYPE}
\\
\verb|min::|\MINKEY{NUMBER} \LABEL{NUMBER-TYPE}
\\
\verb|min::|\MINKEY{SHORT\_STR} \LABEL{SHORT-STR-TYPE}
\\
\verb|min::|\MINKEY{LONG\_STR} \LABEL{LONG-STR-TYPE}
\\
\verb|min::|\MINKEY{LABEL} \LABEL{LABEL-TYPE}
\\
\verb|min::|\MINKEY{LABEL\_PAIR} \LABEL{LABEL-PAIR-TYPE}
\\
\verb|min::|\MINKEY{SHORT\_OBJ} \LABEL{SHORT-OBJ-TYPE}
\\
\verb|min::|\MINKEY{LONG\_OBJ} \LABEL{LONG-OBJ-TYPE}

\end{indpar}

\newpage

\INDEXHEADER{Stub Related Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.2in}}

\verb|int | & \TTKEY{type\_of}\verb| ( min::stub * s )|
\LABEL{TYPE_OF} \\[1ex]
\verb|bool min::| & \MINKEY{is\_collectible}\verb| ( int type )|
\LABEL{MIN::IS_COLLECTIBLE} \\[1ex]
(unsigned integer macro)~~ & \TTKEY{MIN\_DEALLOCATED\_LIMIT}
\LABEL{MIN_DEALLOCATED_LIMIT} \\
\verb|void | & \TTKEY{assert\_allocated}\ARGBREAK
               \verb| ( min::stub * s, unsigned size )|
\LABEL{ASSERT_ALLOCATED} \\
\verb|bool min::| & \MINKEY{relocated\_flag}\verb| ( void )|
\LABEL{MIN::RELOCATED_FLAG} \\
\verb|bool min::| & \MINKEY{set\_relocated\_flag}\verb| ( bool )|
\LABEL{MIN::SET_RELOCATED_FLAG} \\
\verb|void min::| & \MINKEY{interrupt\REL}\verb| ( void )|
\LABEL{MIN::INTERRUPT} \\
\verb|void | & \TTKEY{deallocate\REL}\verb| ( min::stub * s )|
\LABEL{DEALLOCATE} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Gen Value Protected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.5in}}

\verb|bool min::| & \MINKEY{is\_direct\_int}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_INT} \\
\verb|bool min::| & \MINKEY{is\_direct\_float}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_FLOAT} \\
\verb|bool min::| & \MINKEY{is\_direct\_str}\verb| ( min::gen v )|
\LABEL{MIN::IS_DIRECT_STR} \\
\verb|bool min::| & \MINKEY{is\_list\_aux}\verb| ( min::gen v )|
\LABEL{MIN::IS_LIST_AUX} \\
\verb|bool min::| & \MINKEY{is\_sublist\_aux}\verb| ( min::gen v )|
\LABEL{MIN::IS_SUBLIST_AUX} \\
\verb|bool min::| & \MINKEY{is\_stub}\verb| ( min::gen v )|
\LABEL{MIN::IS_STUB} \\[1ex]

\verb|min::float64 min::| & \MINKEY{direct\_float\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_FLOAT_OF} \\
\verb|min::int32 min::| & \MINKEY{direct\_int\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_INT_OF} \\
\verb|min::uns64 min::| & \MINKEY{direct\_str\_of}\verb| ( min::gen v )|
\LABEL{MIN::DIRECT_STR_OF} \\
\verb|min::stub * min::| & \MINKEY{stub\_of}\verb| ( min::gen v )|
\LABEL{MIN::STUB_OF} \\
\verb|unsigned min::| & \MINKEY{list\_aux\_of}\verb| ( min::gen v )|
\LABEL{MIN::LIST_AUXILARY_OF} \\
\verb|unsigned min::| & \MINKEY{sublist\_aux\_of}\verb| ( min::gen v )|
\LABEL{MIN::SUBLIST_AUXILARY_OF} \\[1ex]

\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( int v )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_INT} \\
\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( min::float64 v )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_FLOAT64} \\
\verb|min::gen min::| & \MINKEY{new\_direct\_gen}\verb| ( const char * p )|
\LABEL{MIN::NEW_DIRECT_GEN_OF_STR} \\
\verb|min::gen min::| & \MINKEY{new\_gen}\verb| ( min::stub * s )|
\LABEL{MIN::NEW_GEN_OF_STUB} \\
\verb|min::gen min::| & \MINKEY{new\_list\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MIN::NEW_LIST_AUX_GEN} \\
\verb|min::gen min::| & \MINKEY{new\_sublist\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MIN::NEW_SUBLIST_AUX_GEN} \\[1ex]

\verb|int min::| & \MINKEY{gen\_subtype\_of}\verb| ( min::gen v )|
\LABEL{MIN::GEN_SUBTYPE_OF} \\

\end{tabular}

\end{indpar}

\newpage

\INDEXHEADER{Gen Value Unprotected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.5in}}

\verb|min::float64 MUP::| & \MUPKEY{direct\_float\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_FLOAT_OF} \\
\verb|min::int32 MUP::| & \MUPKEY{direct\_int\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_INT_OF} \\
\verb|min::uns64 MUP::| & \MUPKEY{direct\_str\_of}\verb| ( min::gen v )|
\LABEL{MUP::DIRECT_STR_OF} \\
\verb|min::stub *  MUP::| & \MUPKEY{stub\_of}\verb| ( min::gen v )|
\LABEL{MUP::STUB_OF} \\
\verb|unsigned MUP::| & \MUPKEY{list\_aux\_of}\verb| ( min::gen v )|
\LABEL{MUP::LIST_AUX_OF} \\
\verb|unsigned MUP::| & \MUPKEY{sublist\_aux\_of}\verb| ( min::gen v )|
\LABEL{MUP::SUBLIST_AUX_OF} \\[1ex]

\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( int v )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_INT} \\
\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( min::float64 v )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_FLOAT64} \\
\verb|min::gen MUP::| & \MUPKEY{new\_direct\_gen}\verb| ( const char * p )|
\LABEL{MUP::NEW_DIRECT_GEN_OF_STR} \\
\verb|min::gen MUP::| & \MUPKEY{new\_gen}\verb| ( min::stub * s )|
\LABEL{MUP::NEW_GEN_OF_STUB} \\
\verb|min::gen MUP::| & \MUPKEY{new\_list\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MUP::NEW_LIST_AUX_GEN} \\
\verb|min::gen MUP::| & \MUPKEY{new\_sublist\_aux\_gen}\verb| ( unsigned p )|
\LABEL{MUP::NEW_SUBLIST_AUX_GEN} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Gen Value Subtype Codes}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_INT}
\LABEL{MIN::GEN_DIRECT_INT} \\
\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_FLOAT}
\LABEL{MIN::GEN_DIRECT_FLOAT} \\
\verb|const unsigned min::| & \MINKEY{GEN\_DIRECT\_STR}
\LABEL{MIN::GEN_DIRECT_STR} \\
\verb|const unsigned min::| & \MINKEY{GEN\_STUB}
\LABEL{MIN::GEN_STUB} \\
\verb|const unsigned min::| & \MINKEY{GEN\_LIST\_AUX}
\LABEL{MIN::GEN_LIST_AUX} \\
\verb|const unsigned min::| & \MINKEY{GEN\_SUBLIST\_AUX}
\LABEL{MIN::GEN_SUBLIST_AUX} \\
\verb|const unsigned min::| & \MINKEY{GEN\_ILLEGAL}
\LABEL{MIN::GEN_ILLEGAL} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Number Stub Protected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}


\verb|min::float64 | & \MINKEY{float64\_of}\verb| ( min::stub * s )|
\LABEL{FLOAT64_OF} \\[1ex]

\verb|void min::stub * MUP::|
	& \MUPKEY{new\_number\REL}\verb| ( min::float64 f )|
\LABEL{MUP::NEW_NUMBER} \\[1ex]

\verb|int min::| & \MINKEY{is\_number}\verb| ( min::gen v )|
\LABEL{MIN::IS_NUMBER} \\[1ex]
\verb|min::gen min::| &
	\MINKEY{new\_gen\REL} \verb| ( int v )|
\LABEL{MIN::NEW_GEN_OF_INT} \\
\verb|min::gen min::| &
	\MINKEY{new\_gen\REL} \verb| ( min::float64 v )|
\LABEL{MIN::NEW_GEN_OF_FLOAT64} \\[1ex]
\verb|int min::| & \MINKEY{int\_of}\verb| ( min::gen v )|
\LABEL{MIN::INT_OF_GEN} \\
\verb|min::float64 min::| & \MINKEY{number\_of}\verb| ( min::gen v )|
\LABEL{MIN::NUMBER_OF_GEN} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Number Stub Unprotected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|min::float64 MUP::| & \MUPKEY{float64\_of}\verb| ( min::stub * s )|
\LABEL{MUP::FLOAT64_OF} \\
\verb|void MUP::| &
    \MUPKEY{set\_float64\_of}\ARGBREAK\verb| ( min::stub * s, min::float64 f )|
\LABEL{MUP::SET_FLOAT64_OF} \\[1ex]

\end{tabular}

\end{indpar}

\newpage

\INDEXHEADER{String Stub Protected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|unsigned | & \TTKEY{strlen}\verb| ( min::stub * s )|
\LABEL{STRLEN} \\
\verb|unsigned | & \TTKEY{strhash}\verb| ( min::stub * s )|
\LABEL{STRHASH} \\
\verb|min::uns64 | & \TTKEY{strsignature}\verb| ( min::stub * s )|
\LABEL{STRSIGNATURE} \\[1ex]

\verb|char * | & \TTKEY{strcpy}\verb| ( char * p, min::stub * s )|
\LABEL{STRCPY} \\
\verb|char * | & \TTKEY{strncpy}\ARGBREAK
	\verb| ( char * p,|\ARGBREAK
	\verb|   min::stub * s, unsigned n )|
\LABEL{STRNCPY} \\[1ex]

\verb|unsigned min::| & \MINKEY{strlen}\verb| ( min::gen v )|
\LABEL{MIN::STRLEN_OF_GEN} \\
\verb|unsigned min::| & \MINKEY{strhash}\verb| ( min::gen s )|
\LABEL{MIN::STRHASH_OF_GEN} \\
\verb|min::uns64 min::| & \MINKEY{strsignature}\verb| ( min::gen s )|
\LABEL{MIN::STRSIGNATURE_OF_GEN} \\
\verb|char * min::| & \MINKEY{strcpy}\verb| ( char * p, min::gen s )|
\LABEL{MIN::STRCPY_OF_GEN} \\
\verb|char * min::| & \MINKEY{strncpy}\ARGBREAK
                      \verb| ( char * p,|\ARGBREAK
		      \verb|   min::gen s, unsigned n )|
\LABEL{MIN::STRNCPY_OF_GEN} \\[1ex]

\verb|int min::| & \MINKEY{is\_str}\verb| ( min::gen v )|
\LABEL{MIN::IS_STR_OF_GEN}
\\[1ex]

\verb|min::gen min::| &
    \MINKEY{new\_gen\REL} \verb| ( const char * p )|
\LABEL{MIN::NEW_GEN_OF_STR} \\

\end{tabular}

\end{indpar}

\newpage

\INDEXHEADER{String Stub Unprotected Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|min::uns64 MUP::| &
	\MUPKEY{short\_str\_of}\verb| ( min::stub * s )|
\LABEL{MUP::SHORT_STR_OF} \\[1ex]

\verb|void MUP::| &
    \MUPKEY{set\_short\_str\_of}\ARGBREAK
    \verb| ( min::stub * s, min::uns64 str )|
\LABEL{MUP::SET_SHORT_STR_OF} \\[1ex]

\verb|min::long_str * MUP::| &
	\MUPKEY{long\_str\_of}\verb| ( min::stub * s )|
\LABEL{MUP::LONG_STR_OF} \\
\verb|unsigned | & \TTKEY{length\_of}\verb| ( min::long_str * str )|
\LABEL{LENGTH_OF_LONG_STR} \\
\verb|unsigned | & \TTKEY{hash\_of}\verb| ( min::long_str * str )|
\LABEL{HASH_OF_LONG_STR} \\
\verb|min::uns64 | & \TTKEY{signature\_of}\verb| ( min::long_str * str )|
\LABEL{SIGNATURE_OF_LONG_STR} \\
\verb|const char * | & \TTKEY{str\_of}\verb| ( min::long_str * str )|
\LABEL{STR_OF_LONG_STR} \\[1ex]

\verb|unsigned MUP::| & \MUPKEY{hash\_of}\verb| ( min::long_str * str )|
\LABEL{MUP::HASH_OF_LONG_STR} \\
\verb|char * MUP::| & \MUPKEY{str\_of}\verb| ( min::long_str * str )|
\LABEL{MUP::STR_OF_LONG_STR} \\
\verb|void MUP::| &
   \MUPKEY{set\_length\_of}\ARGBREAK
   \verb| ( min::long_str * str,|\ARGBREAK\verb|   unsigned length )|
\LABEL{MUP::SET_LENGTH_OF_LONG_STR} \\
\verb|void MUP::| &
   \MUPKEY{set\_hash\_of}\ARGBREAK
    \verb| ( min::long_str * str,|\ARGBREAK\verb|   unsigned hash )|
\LABEL{MUP::SET_HASH_OF_LONG_STR} \\[1ex]

\verb|void min::stub * MUP::|
	& \MUPKEY{new\_str\REL}\verb| ( const char * p )|
\LABEL{MUP::NEW_STR} \\[1ex]

\end{tabular}

\end{indpar}

\newpage

\INDEXHEADER{Label Stub Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|unsigned | & \TTKEY{lab\_of}\ARGBREAK
    \verb| ( min::gen * p, unsigned n,|\ARGBREAK\verb|   min::stub * s )|
\LABEL{LAB_OF} \\
\verb|unsigned min::| & \MINKEY{lab\_of}\ARGBREAK
    \verb| ( min::gen * p, unsigned n,|\ARGBREAK\verb|   min::gen v )|
\LABEL{MIN::LAB_OF_GEN} \\[1ex]

\verb|unsigned | & \TTKEY{lablen}\verb| ( min::stub * s )|
\LABEL{LABLEN} \\
\verb|unsigned min::| & \MINKEY{lablen}\verb| ( min::gen v )|
\LABEL{MIN::LABLEN_OF_GEN} \\[1ex]

\verb|unsigned | & \TTKEY{labhash}\verb| ( min::stub * s )|
\LABEL{LABHASH} \\
\verb|unsigned min::| & \MINKEY{labhash}\verb| ( min::gen v )|
\LABEL{MIN::LABHASH_OF_GEN} \\
\verb|unsigned min::| & \MINKEY{labhash}\ARGBREAK
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MIN::LABHASH_OF_GEN_VECTOR} \\[1ex]

\verb|min::stub * MUP::| & \MUPKEY{new\_label}\ARGBREAK
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MUP::NEW_LABEL} \\[1ex]

\verb|min::gen min::| & \MINKEY{new\_gen}\ARGBREAK
    \verb| ( min::gen * const p, unsigned n )|
\LABEL{MIN::NEW_GEN_OF_GEN_VECTOR} \\[1ex]

\verb|bool min::| & \MINKEY{is\_label}\verb| ( min::gen v )|
\LABEL{MIN::IS_LABEL_OF_GEN} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Label Pair Stub Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|min::gen | & \TTKEY{label\_of}\verb| ( min::stub * s )|
\LABEL{LABEL_OF} \\
\verb|min::gen min::| & \MINKEY{label\_of}\verb| ( min::gen v )|
\LABEL{MIN::LABEL_OF_GEN} \\
\verb|min::gen | & \TTKEY{co\_label\_of}\verb| ( min::stub * s )|
\LABEL{CO_LABEL_OF} \\
\verb|min::gen min::| & \MINKEY{co\_label\_of}\verb| ( min::gen v )|
\LABEL{MIN::CO_LABEL_OF_GEN} \\[1ex]

\verb|min::stub * MUP::| & \MUPKEY{new\_label\_pair}\ARGBREAK
    \verb| ( min::gen label, min::gen co_label )|
\LABEL{MUP::NEW_LABEL_PAIR} \\[1ex]

\verb|min::gen min::| & \MINKEY{new\_gen}\ARGBREAK
    \verb| ( min::gen label, min::gen co_label )|
\LABEL{MIN::NEW_GEN_OF_GEN_PAIR} \\[1ex]

\verb|bool min::| & \MINKEY{is\_label\_pair}\verb| ( min::gen v )|
\LABEL{MIN::IS_LABEL_PAIR} \\[1ex]

\verb|min::stub * | & \TTKEY{co\_pair\_of}\verb| ( min::stub * s )|
\LABEL{CO_PAIR_OF} \\
\verb|min::gen min::| & \MINKEY{co\_pair\_of}\verb| ( min::gen v )|
\LABEL{MIN::CO_PAIR_OF_GEN} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Object Stub Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|min::short_obj * MUP::| &
	\MUPKEY{short\_obj\_of}\verb| ( min::stub * s )|
\LABEL{MUP::SHORT_OBJ_OF} \\
\verb|min::long_obj * MUP::| &
	\MUPKEY{long\_obj\_of}\verb| ( min::stub * s )|
\LABEL{MUP::LONG_OBJ_OF} \\

\end{tabular}

\end{indpar}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{5.0in}}

\verb|unsigned | & \TTKEY{hash\_table\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{HASH_TABLE_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{hash\_table\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{HASH_TABLE_SIZE_OF_LONG_OBJ} \\
\verb|unsigned | & \TTKEY{obj\_vector\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{OBJ_VECTOR_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{obj\_vector\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{OBJ_VECTOR_SIZE_OF_LONG_OBJ} \\
\verb|unsigned |
    & \TTKEY{auxilary\_area\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{AUXILARY_AREA_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned |
    & \TTKEY{auxilary\_area\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{AUXILARY_AREA_SIZE_OF_LONG_OBJ} \\
\verb|unsigned |
    & \TTKEY{unused\_area\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{UNUSED_AREA_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned |
    & \TTKEY{unused\_area\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{UNUSED_AREA_SIZE_OF_LONG_OBJ} \\
\verb|unsigned | & \TTKEY{total\_size\_of}\verb| ( min::short_obj * so )|
\LABEL{TOTAL_SIZE_OF_SHORT_OBJ} \\
\verb|unsigned | & \TTKEY{total\_size\_of}\verb| ( min::long_obj * lo )|
\LABEL{TOTAL_SIZE_OF_LONG_OBJ} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Object Vector Level Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.5in}}

\verb|const min::gen * |
	& \TTKEY{body\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{BODY_VECTOR_OF_SHORT_OBJ} \\
\verb|const min::gen * |
	& \TTKEY{body\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{BODY_VECTOR_OF_LONG_OBJ} \\
\verb|min::gen * MUP::|
	& \MUPKEY{body\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{MUP::BODY_VECTOR_OF_SHORT_OBJ} \\
\verb|min::gen * MUP::|
	& \MUPKEY{body\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{MUP::BODY_VECTOR_OF_LONG_OBJ} \\

\verb|unsigned |
	& \TTKEY{hash\_table\_of}\verb| ( min::short_obj * so )|
\LABEL{HASH_TABLE_OF_SHORT_OBJ} \\
\verb|unsigned |
	& \TTKEY{hash\_table\_of}\verb| ( min::long_obj * lo )|
\LABEL{HASH_TABLE_OF_LONG_OBJ} \\
\verb|unsigned |
	& \TTKEY{object\_vector\_of}\verb| ( min::short_obj * so )|
\LABEL{OBJECT_VECTOR_OF_SHORT_OBJ} \\
\verb|unsigned |
	& \TTKEY{object\_vector\_of}\verb| ( min::long_obj * lo )|
\LABEL{OBJECT_VECTOR_OF_LONG_OBJ} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Object List Level Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.0in}}

\verb|const min::gen min::| & \MINKEY{LIST\_END} \LABEL{MIN::LIST_END} \\
\verb|const min::gen min::| & \MINKEY{EMPTY\_LIST} \LABEL{MIN::EMPTY_LIST} \\

\end{tabular}

\end{indpar}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{5.0in}}

(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::short_obj * so )|
\LABEL{MIN::LIST_POINTER_OF_SHORT_OBJ} \\
(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::long_obj * lo )|
\LABEL{MIN::LIST_POINTER_OF_LONG_OBJ} \\
(constructor)~
	& \MINKEY{list\_pointer}\verb| ( min::gen obj )|
\LABEL{MIN::LIST_POINTER_OF_GEN} \\
\verb|unsigned |
	& \TTKEY{start}\verb| ( min::list_pointer & lp, unsigned p )|
\LABEL{START_OF_LIST_POINTER} \\
\verb|unsigned |
	& \TTKEY{next}\verb| ( min::list_pointer & lp )|
\LABEL{NEXT_OF_LIST_POINTER} \\
\verb|unsigned |
	& \TTKEY{current}\verb| ( min::list_pointer & lp )|
\LABEL{CURRENT_OF_LIST_POINTER} \\
\verb|unsigned | & \TTKEY{start\_sublist}\ARGBREAK
	\verb| ( min::list_pointer & lp, unsigned p )|
\LABEL{START_SUBLIST_OF_LIST_POINTER} \\

\end{tabular}

\end{indpar}

\INDEXHEADER{Object Attribute Level Declarations}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{4.8in}}

\verb|min::gen | & \TTKEY{getg}\verb| ( min::short_obj * so, min::gen name )|
\LABEL{GETG_FROM_SHORT_OBJ} \\
\verb|min::gen | & \TTKEY{getg}\verb| ( min::long_obj * lo, min::gen name )|
\LABEL{GETG_FROM_LONG_OBJ} \\
\verb|min::gen | & \TTKEY{getg}\verb| ( min::stub * s, min::gen name )|
\LABEL{GETG_FROM_STUB} \\
\verb|min::gen min::| & \MINKEY{getg}\verb| ( min::gen obj, min::gen name )|
\LABEL{MIN::GETG} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::short_obj * so, int index )|
\LABEL{GETI_FROM_SHORT_OBJ} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::long_obj * lo, int index )|
\LABEL{GETI_FROM_LONG_OBJ} \\
\verb|min::gen | & \TTKEY{geti}\verb| ( min::stub * s, int index )|
\LABEL{GETI_FROM_STUB} \\
\verb|min::gen min::| & \MINKEY{geti}\verb| ( min::gen obj, int index )|
\LABEL{MIN::GETI} \\

\end{tabular}

\end{indpar}

\begin{indpar}[0.2in]

\begin{tabular}{@{}r@{}p{5.0in}}

\verb|void | & \TTKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so,| \\
    \verb|   min::gen name, min::gen value )|
    \end{tabular}
\LABEL{PUTG_TO_SHORT_OBJ} \\
\verb|void | & \TTKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo,| \\
    \verb|   min::gen name, min::gen value )|
    \end{tabular}
\LABEL{PUTG_TO_LONG_OBJ} \\
\verb|void | & \TTKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s,| \\
    \verb|   min::gen name, min::gen value )|
    \end{tabular}
\LABEL{PUTG_TO_STUB} \\
\verb|void min::| & \MINKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj,| \\
    \verb|   min::gen name, min::gen value )|
    \end{tabular}
\LABEL{MIN::PUTG} \\
\verb|void | & \TTKEY{puti\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so,| \\
    \verb|   int index, min::gen value )|
    \end{tabular}
\LABEL{PUTI_TO_SHORT_OBJ} \\
\verb|void | & \TTKEY{puti\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo,| \\
    \verb|   int index, min::gen value )|
    \end{tabular}
\LABEL{PUTI_TO_LONG_OBJ} \\
\verb|void | & \TTKEY{puti\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s,| \\
    \verb|   int index, min::gen value )|
    \end{tabular}
\LABEL{PUTI_TO_STUB} \\
\verb|void min::| & \MINKEY{puti\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj,| \\
    \verb|   int index, min::gen value )|
    \end{tabular}
\LABEL{MIN::PUTI} \\[1ex]

\verb|void | & \TTKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_SHORT_OBJ} \\
\verb|void | & \TTKEY{putg\REL}%
    \begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s1, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTG_TO_STUB} \\
\verb|void min::| &
    \MINKEY{putg\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj1, min::gen name1,| \\
    \verb|   min::gen name2, min::gen obj2 )|
    \end{tabular}
\LABEL{MIN::DOUBLE_PUTG} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::short_obj * so, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_SHORT_OBJ} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::long_obj * lo, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_LONG_OBJ} \\
\verb|void | &
    \TTKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::stub * s1, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{DOUBLE_PUTI_TO_STUB} \\
\verb|void min::| &
    \MINKEY{puti\REL}\begin{tabular}[t]{@{}l@{}}
    \verb| ( min::gen obj1, int index1,| \\
    \verb|   int index2, min::gen obj2 )|
    \end{tabular}
\LABEL{MIN::DOUBLE_PUTI} \\

\end{tabular}

\end{indpar}


} % end of renewcommand for \LABEL, \{TT,MIN,MUP}KEY.

\bibliographystyle{plain}
\bibliography{min}

\printindex

\end{document}



